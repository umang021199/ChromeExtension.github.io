"use strict";(self.webpackChunksfsce=self.webpackChunksfsce||[]).push([[616],{5616:(Q,O,a)=>{a.r(O),a.d(O,{BulkObjectDeletionModule:()=>H});var h=a(9808),y=a(1533),u=a(2463),x=a(6340),j=a(4128),B=a(4004),v=a(9646),C=a(5577),b=a(4999),e=a(5e3),M=a(520);let A=(()=>{class t{constructor(s){this.http=s,this.utility={compare:l=>{let n=l.split("__");return 3==n.length?n[1]:n[0]},xmlparser:new x.XMLParser,parse:l=>l.map(n=>this.utility.xmlparser.parse(n)["soapenv:Envelope"]["soapenv:Body"].deleteMetadataResponse.result),parseReponse:l=>JSON.stringify(l,(n,i)=>{if("attributes"!==n)return null==i?"-":i}),createChunks:(l,n)=>Array(Math.ceil(l.length/n)).fill(0).map((m,o)=>l.slice(o*n,n*(o+1)))}}getObjectList(){return this.http.get(b.I8.instanceUrl+"/services/data/v53.0/sobjects")}filteredObjects(){}loadObjects(){const l=this.http.get(b.I8.instanceUrl+"/services/data/v53.0/sobjects"),m=this.http.get(b.I8.instanceUrl+"/services/data/v54.0/tooling/query/?q=Select Id, DeveloperName, NamespacePrefix, Description from CustomObject where ManageableState != 'installed'");return(0,j.D)([l,m]).pipe((0,B.U)(o=>o[0].sobjects.filter(r=>{if(r.name.includes("__c")){r.Label=r.label,r.FullName=r.name;let p=o[1].records.find(({DeveloperName:g})=>g===this.utility.compare(r.name));return!!p&&(r.Description=p.Description,r.Id=p.Id,r.ObjectName=p.DeveloperName,!0)}})))}deleteSOAPComposite(s){let m=this.utility.createChunks(s,10).map(o=>(o=>`<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://soap.sforce.com/2006/04/metadata" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Header><tns:SessionHeader><tns:sessionId>${b.I8.sessiontoken}</tns:sessionId></tns:SessionHeader></soapenv:Header><soapenv:Body><tns:deleteMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><tns:type>CustomObject</tns:type>s${o}</tns:deleteMetadata></soapenv:Body></soapenv:Envelope>`)((o=>o.map(d=>`<tns:fullNames>${d}</tns:fullNames>`).join(""))(o)));return 0==m.length?(0,v.of)([]):(0,j.D)(m.map(o=>this.postsoap(o))).pipe((0,C.z)(o=>(0,j.D)([this.loadObjects(),(0,v.of)(this.utility.parse(o.map(d=>d.body)))])))}postsoap(s){return this.http.post(b.I8.instanceUrl+"/services/Soap/m/50.0",s,{responseType:"text",observe:"response"})}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(M.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=a(2897);function N(t,c){1&t&&e.GkF(0)}function S(t,c){1&t&&e.GkF(0)}function T(t,c){if(1&t&&(e.TgZ(0,"div",5),e.TgZ(1,"span",6),e._uU(2),e.qZA(),e.qZA()),2&t){const s=e.oxw();e.xp6(2),e.hij(" ",s.main.objects.length?s.main.objects.length+" Objects":"No Object(s) to display.."," ")}}function w(t,c){1&t&&e._UZ(0,"kendo-grid-column",14),2&t&&e.Q6J("field",c.$implicit)}const F=function(){return{checkboxOnly:!0,mode:"multiple"}};function I(t,c){if(1&t){const s=e.EpF();e.TgZ(0,"kendo-grid",11),e.NdJ("selectionChange",function(n){return e.CHM(s),e.oxw(2).main.selectionChange(n)}),e._UZ(1,"kendo-grid-checkbox-column",12),e.YNc(2,w,1,1,"kendo-grid-column",13),e.qZA()}if(2&t){const s=e.oxw(2);e.Q6J("kendoGridBinding",s.main.objects)("scrollable",!0)("columnMenu",!0)("filter",s.state.filter)("filterable",!0)("selectable",e.DdM(8,F)),e.xp6(1),e.Q6J("width",65),e.xp6(1),e.Q6J("ngForOf",s.main.objectKeys)}}function Z(t,c){if(1&t){const s=e.EpF();e.YNc(0,I,3,9,"kendo-grid",7),e.TgZ(1,"div",8),e.TgZ(2,"button",9),e.NdJ("click",function(){return e.CHM(s),e.oxw().main.popupForDelete()}),e._uU(3," Delete Objects "),e._UZ(4,"i",10),e.qZA(),e.qZA()}if(2&t){const s=e.oxw();e.Q6J("ngIf",!s.main.hide),e.xp6(2),e.Q6J("disabled",s.main.isDisable)}}const _=[{path:"",component:(()=>{class t{constructor(s){this.Service=s,this.state={filter:{logic:"and",filters:[]}},this.utility={removeDeseleted:(l,n)=>l.filter(i=>!n.includes(i))},this.main={hide:!1,isDisable:!0,objects:[],selectedObjects:{},deselectedObjects:{},jsonResponse:{},objectKeys:["Id","Label","ObjectName","Description","FullName"],init:()=>{this.Service.loadObjects().subscribe(l=>{this.main.objects=l;let n=l.length,i=n>1?" Objects Were fetched successfully":"Object was fetched successfully";this.main.hide=!1,n>1?u.y.maketoast({template:"success",body:n+i,duration:1e4}):1==n&&u.y.maketoast({template:"success",body:i,duration:5e3})})},selectionChange:l=>{this.main.isDisable=!1,l.selectedRows.length>0?l.selectedRows.forEach(n=>{this.main.selectedObjects[n.dataItem.FullName]=n.dataItem}):l.deselectedRows.forEach(n=>{this.main.deselectedObjects[n.dataItem.FullName]=n.dataItem})},popupForDelete:()=>{u.y.ask({question:"Are you sure you want to Delete these Objects?",callback:()=>{u.y.dialogprompt=null,this.main.delete()}})},delete:()=>{let l=Object.keys(this.main.selectedObjects),n=Object.keys(this.main.deselectedObjects),i=this.utility.removeDeseleted(l,n);this.main.isDisable=!0,this.main.selectedObjects={},this.main.deselectedObjects={};let m="";this.Service.deleteSOAPComposite(i).subscribe(o=>{let d=0,r=0;o[1]=Array.isArray(o[1][0])?o[1][0]:o[1],o[1].forEach(D=>{D.success?d++:(m+=D.errors.message+", ",r++)});let p=d>1?" Objects were deleted successfully":"Object was deleted successfully";d>1?u.y.maketoast({template:"success",body:d+p,duration:5e3}):1==d&&u.y.maketoast({template:"success",body:p,duration:5e3});let g=r>1?" Objects were not deleted due to "+m:"Object was not deleted due to "+m;r>1?u.y.maketoast({template:"warning",body:r+g,duration:5e3}):1==r&&u.y.maketoast({template:"warning",body:g,duration:5e3}),this.main.hide=!0,setTimeout(()=>{this.main.init()},50)})}}}ngOnInit(){this.main.init()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(A))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-bulk-object-deletion"]],decls:8,vars:2,consts:[[1,"tabbed-panel"],[1,"body"],[4,"ngTemplateOutlet"],["localfooter",""],["grid",""],[1,"footer-container"],[1,"text-center"],["sortable","true","class","text-small h-100-40","style","background-color: inherit !important",3,"kendoGridBinding","scrollable","columnMenu","filter","filterable","selectable","selectionChange",4,"ngIf"],[1,"d-flex","p-1"],[1,"btn","btn-danger","btn-sm","me-1",3,"disabled","click"],[1,"bi","bi-trash"],["sortable","true",1,"text-small","h-100-40",2,"background-color","inherit !important",3,"kendoGridBinding","scrollable","columnMenu","filter","filterable","selectable","selectionChange"],["showSelectAll","true",3,"width"],[3,"field",4,"ngFor","ngForOf"],[3,"field"]],template:function(s,l){if(1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,N,1,0,"ng-container",2),e.qZA(),e.YNc(3,S,1,0,"ng-container",2),e.qZA(),e.YNc(4,T,3,1,"ng-template",null,3,e.W1O),e.YNc(6,Z,5,2,"ng-template",null,4,e.W1O)),2&s){const n=e.MAs(5),i=e.MAs(7);e.xp6(2),e.Q6J("ngTemplateOutlet",i),e.xp6(1),e.Q6J("ngTemplateOutlet",n)}},directives:[h.tP,h.O5,f.MwP,f.HWw,f.HbC,h.sg,f.bg4],styles:[""]}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[y.Bz.forChild(_)],y.Bz]}),t})();var k=a(3075),U=a(321),R=a(9446),E=a(1375),L=a(3985);let H=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[h.ez,J,U.q2,k.u5,R.rw,k.UX,E.cP,L.W,f.zE6]]}),t})()}}]);