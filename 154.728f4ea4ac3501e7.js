"use strict";(self.webpackChunksfsce=self.webpackChunksfsce||[]).push([[154],{6154:(hi,V,g)=>{g.r(V),g.d(V,{DebuglogsModule:()=>ui});var h=g(9808),T=g(1533),q=g(4128),J=g(1135),p=g(4999),P=g(4908),v=g(2463),y=g(520),Z=g(9646),x=g(7555),e=g(5e3);let Y=(()=>{class n{constructor(t,i){this.http=t,this.router=i,this.watchers={debuglogs:!1,taillogs:!1,lastlog:""}}getlogsforwatcher(t){return this.watchers.taillogs&&"taillogs"===t||!this.watchers.taillogs&&"debuglogs"===t?this.getalllogs():(0,Z.of)()}getnotification(t){if("granted"!==Notification.permission)Notification.requestPermission();else if(this.watchers.debuglogs){let o="";const s=t.records.map(a=>a.Id)||[],r=s.indexOf(this.watchers.lastlog);if(this.watchers.lastlog=s[0],r<1||(o=r+" new logs received",!x.X.data.notifications.system.enabled||!x.X.datatemp.tasks.poll.active))return;new Notification("Debug Logs",{icon:"../../../../assets/images/logo/icon.png",body:o}).onclick=()=>{window.focus(),this.router.navigateByUrl("/debug-logs/logs")}}}getusers(){return this.http.get(p.I8.instanceUrl+`/services/data/v${x.X.data.salesforce.api.version}/query/?q=SELECT Name,Username, Id from User`)}getalllogs(){let i=new y.WM;return i=i.set("background",["true"]),this.http.get(p.I8.instanceUrl+"/services/data/v49.0/query/?q=SELECT id, LogUser.Name, LogLength, Operation, Status, DurationMilliseconds, StartTime from ApexLog ORDER BY StartTime DESC",{headers:i})}getlogbody(t,i){let o=new y.WM;return o=o.set("background",["true"]),this.http.get(p.I8.instanceUrl+"/services/data/v49.0/sobjects/ApexLog/"+t+"/Body",{responseType:"text",headers:i?o:void 0})}downloadfile(t,i,o){const s=new Blob([t],{type:i}),r=window.URL.createObjectURL(s);if(null==i||null==i)P.Y.chrome.windows.create({url:r});else{const a=document.createElement("a");a.href=r,a.download="logbody("+o+")",a.click()}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.eN),e.LFG(T.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var j=g(9643),f=g(3075);function E(n,l=0){return function ue(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):l}var b=g(7579),O=g(8306),G=g(4968),pe=g(6406),fe=g(4408);let I,me=1;const M={};function Q(n){return n in M&&(delete M[n],!0)}const _e={setImmediate(n){const l=me++;return M[l]=!0,I||(I=Promise.resolve()),I.then(()=>Q(l)&&n()),l},clearImmediate(n){Q(n)}},{setImmediate:ve,clearImmediate:be}=_e,A={setImmediate(...n){const{delegate:l}=A;return((null==l?void 0:l.setImmediate)||ve)(...n)},clearImmediate(n){const{delegate:l}=A;return((null==l?void 0:l.clearImmediate)||be)(n)},delegate:void 0};var Ce=g(7565);const we=new class Te extends Ce.v{flush(l){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let i,o=-1;l=l||t.shift();const s=t.length;do{if(i=l.execute(l.state,l.delay))break}while(++o<s&&(l=t.shift()));if(this._active=!1,i){for(;++o<s&&(l=t.shift());)l.unsubscribe();throw i}}}(class xe extends fe.o{constructor(l,t){super(l,t),this.scheduler=l,this.work=t}requestAsyncId(l,t,i=0){return null!==i&&i>0?super.requestAsyncId(l,t,i):(l.actions.push(this),l._scheduled||(l._scheduled=A.setImmediate(l.flush.bind(l,void 0))))}recycleAsyncId(l,t,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(l,t,i);0===l.actions.length&&(A.clearImmediate(t),l._scheduled=void 0)}});var R=g(6921),H=g(5191),ye=g(1884),N=g(3601),Se=g(9300),F=g(2722),$=g(8675),ke=g(4482),De=g(5403),Ee=g(3900),Me=g(4782);let U;try{U="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){U=!1}let L,C,W=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?(0,h.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!U)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.Lbi))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function k(){if("object"!=typeof document||!document)return 0;if(null==L){const n=document.createElement("div"),l=n.style;n.dir="rtl",l.width="1px",l.overflow="auto",l.visibility="hidden",l.pointerEvents="none",l.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),L=0,0===n.scrollLeft&&(n.scrollLeft=1,L=0===n.scrollLeft?1:2),n.remove()}return L}const Ie=new e.OlP("cdk-dir-doc",{providedIn:"root",factory:function Re(){return(0,e.f3M)(h.K0)}}),Ne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let K=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new e.vpe,t){const o=t.documentElement?t.documentElement.dir:null;this.value=function Fe(n){const l=(null==n?void 0:n.toLowerCase())||"";return"auto"===l&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Ne.test(navigator.language)?"rtl":"ltr":"rtl"===l?"rtl":"ltr"}((t.body?t.body.dir:null)||o||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ie,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();class Be extends class Ue{}{constructor(l){super(),this._data=l}connect(){return(0,H.b)(this._data)?this._data:(0,Z.of)(this._data)}disconnect(){}}class Ve{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(l,t,i,o,s){l.forEachOperation((r,a,c)=>{let d,_;null==r.previousIndex?(d=this._insertView(()=>i(r,a,c),c,t,o(r)),_=d?1:0):null==c?(this._detachAndCacheView(a,t),_=3):(d=this._moveView(a,c,t,o(r)),_=2),s&&s({context:null==d?void 0:d.context,operation:_,record:r})})}detach(){for(const l of this._viewCache)l.destroy();this._viewCache=[]}_insertView(l,t,i,o){const s=this._insertViewFromCache(t,i);if(s)return void(s.context.$implicit=o);const r=l();return i.createEmbeddedView(r.templateRef,r.context,r.index)}_detachAndCacheView(l,t){const i=t.detach(l);this._maybeCacheView(i,t)}_moveView(l,t,i,o){const s=i.get(l);return i.move(s,t),s.context.$implicit=o,s}_maybeCacheView(l,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(l);else{const i=t.indexOf(l);-1===i?l.destroy():t.remove(i)}}_insertViewFromCache(l,t){const i=this._viewCache.pop();return i&&t.insert(i,l),i||null}}const te=new e.OlP("_ViewRepeater"),qe=["contentWrapper"],Je=["*"],ie=new e.OlP("VIRTUAL_SCROLL_STRATEGY");class Pe{constructor(l,t,i){this._scrolledIndexChange=new b.x,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,ye.x)()),this._viewport=null,this._itemSize=l,this._minBufferPx=t,this._maxBufferPx=i}attach(l){this._viewport=l,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(l,t,i){this._itemSize=l,this._minBufferPx=t,this._maxBufferPx=i,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(l,t){this._viewport&&this._viewport.scrollToOffset(l*this._itemSize,t)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const l=this._viewport.getRenderedRange(),t={start:l.start,end:l.end},i=this._viewport.getViewportSize(),o=this._viewport.getDataLength();let s=this._viewport.measureScrollOffset(),r=this._itemSize>0?s/this._itemSize:0;if(t.end>o){const c=Math.ceil(i/this._itemSize),d=Math.max(0,Math.min(r,o-c));r!=d&&(r=d,s=d*this._itemSize,t.start=Math.floor(r)),t.end=Math.max(0,Math.min(o,t.start+c))}const a=s-t.start*this._itemSize;if(a<this._minBufferPx&&0!=t.start){const c=Math.ceil((this._maxBufferPx-a)/this._itemSize);t.start=Math.max(0,t.start-c),t.end=Math.min(o,Math.ceil(r+(i+this._minBufferPx)/this._itemSize))}else{const c=t.end*this._itemSize-(s+i);if(c<this._minBufferPx&&t.end!=o){const d=Math.ceil((this._maxBufferPx-c)/this._itemSize);d>0&&(t.end=Math.min(o,t.end+d),t.start=Math.max(0,Math.floor(r-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(t),this._viewport.setRenderedContentOffset(this._itemSize*t.start),this._scrolledIndexChange.next(Math.floor(r))}}function Ye(n){return n._scrollStrategy}let je=(()=>{class n{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new Pe(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(t){this._itemSize=E(t)}get minBufferPx(){return this._minBufferPx}set minBufferPx(t){this._minBufferPx=E(t)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(t){this._maxBufferPx=E(t)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[e._Bn([{provide:ie,useFactory:Ye,deps:[(0,e.Gpc)(()=>n)]}]),e.TTD]}),n})(),ne=(()=>{class n{constructor(t,i,o){this._ngZone=t,this._platform=i,this._scrolled=new b.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new O.y(i=>{this._globalSubscription||this._addGlobalListener();const o=t>0?this._scrolled.pipe((0,N.e)(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Z.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const o=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe((0,Se.h)(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let o=function he(n){return n instanceof e.SBq?n.nativeElement:n}(i),s=t.getElementRef().nativeElement;do{if(o==s)return!0}while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const t=this._getWindow();return(0,G.R)(t.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.R0b),e.LFG(W),e.LFG(h.K0,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oe=(()=>{class n{constructor(t,i,o,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=o,this.dir=s,this._destroyed=new b.x,this._elementScrolled=new O.y(r=>this.ngZone.runOutsideAngular(()=>(0,G.R)(this.elementRef.nativeElement,"scroll").pipe((0,F.R)(this._destroyed)).subscribe(r)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,o=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=o?t.end:t.start),null==t.right&&(t.right=o?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),o&&0!=k()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==k()?t.left=t.right:1==k()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;!function Le(){if(null==C){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return C=!1,C;if("scrollBehavior"in document.documentElement.style)C=!0;else{const n=Element.prototype.scrollTo;C=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return C}()?(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left)):i.scrollTo(t)}measureScrollOffset(t){const i="left",o="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const r=this.dir&&"rtl"==this.dir.value;return"start"==t?t=r?o:i:"end"==t&&(t=r?i:o),r&&2==k()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:r&&1==k()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(ne),e.Y36(e.R0b),e.Y36(K,8))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),He=(()=>{class n{constructor(t,i,o){this._platform=t,this._change=new b.x,this._changeListener=s=>{this._change.next(s)},this._document=o,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:o}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+o,right:t.left+i,height:o,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),o=t.documentElement,s=o.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||o.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||o.scrollLeft||0}}change(t=20){return t>0?this._change.pipe((0,N.e)(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(W),e.LFG(e.R0b),e.LFG(h.K0,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const We="undefined"!=typeof requestAnimationFrame?pe.Z:we;let se=(()=>{class n extends oe{constructor(t,i,o,s,r,a,c){super(t,a,o,r),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this._detachedSubject=new b.x,this._renderedRangeSubject=new b.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new O.y(d=>this._scrollStrategy.scrolledIndexChange.subscribe(_=>Promise.resolve().then(()=>this.ngZone.run(()=>d.next(_))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=R.w0.EMPTY,this._viewportChanges=c.change().subscribe(()=>{this.checkViewportSize()})}get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=function ge(n){return null!=n&&"false"!=`${n}`}(t)}ngOnInit(){super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.elementScrolled().pipe((0,$.O)(null),(0,N.e)(0,We)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()}))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe((0,F.R)(this._detachedSubject)).subscribe(i=>{const o=i.length;o!==this._dataLength&&(this._dataLength=o,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function $e(n,l){return n.start==l.start&&n.end==l.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){const s="horizontal"==this.orientation,r=s?"X":"Y";let c=`translate${r}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t=this.appendOnly&&"to-start"===i?0:t,"to-end"===i&&(c+=` translate${r}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=c&&(this._renderedContentTransform=c,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const o={behavior:i};"horizontal"===this.orientation?o.start=t:o.top=t,this.scrollTo(o)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){return super.measureScrollOffset(t||("horizontal"===this.orientation?"start":"top"))}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){const t=this.elementRef.nativeElement;this._viewportSize="horizontal"===this.orientation?t.clientWidth:t.clientHeight}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(e.R0b),e.Y36(ie,8),e.Y36(K,8),e.Y36(ne),e.Y36(He))},n.\u0275cmp=e.Xpm({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&e.Gf(qe,7),2&t){let o;e.iGM(o=e.CRH())&&(i._contentWrapper=o.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&e.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[e._Bn([{provide:oe,useExisting:n}]),e.qOj],ngContentSelectors:Je,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0,1),e.Hsn(2),e.qZA(),e._UZ(3,"div",2)),2&t&&(e.xp6(3),e.Udp("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;overflow:auto;contain:strict;transform:translateZ(0);will-change:scroll-position;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{position:absolute;top:0;left:0;height:1px;width:1px;transform-origin:0 0}[dir=rtl] .cdk-virtual-scroll-spacer{right:0;left:auto;transform-origin:100% 0}\n"],encapsulation:2,changeDetection:0}),n})();function le(n,l,t){if(!t.getBoundingClientRect)return 0;const o=t.getBoundingClientRect();return"horizontal"===n?"start"===l?o.left:o.right:"start"===l?o.top:o.bottom}let Xe=(()=>{class n{constructor(t,i,o,s,r,a){this._viewContainerRef=t,this._template=i,this._differs=o,this._viewRepeater=s,this._viewport=r,this.viewChange=new b.x,this._dataSourceChanges=new b.x,this.dataStream=this._dataSourceChanges.pipe((0,$.O)(null),function Ze(){return(0,ke.e)((n,l)=>{let t,i=!1;n.subscribe(new De.Q(l,o=>{const s=t;t=o,i&&l.next([s,o]),i=!0}))})}(),(0,Ee.w)(([c,d])=>this._changeDataSource(c,d)),(0,Me.d)(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new b.x,this.dataStream.subscribe(c=>{this._data=c,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe((0,F.R)(this._destroyed)).subscribe(c=>{this._renderedRange=c,a.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(t){this._cdkVirtualForOf=t,function ze(n){return n&&"function"==typeof n.connect}(t)?this._dataSourceChanges.next(t):this._dataSourceChanges.next(new Be((0,H.b)(t)?t:Array.from(t||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(t){this._needsUpdate=!0,this._cdkVirtualForTrackBy=t?(i,o)=>t(i+(this._renderedRange?this._renderedRange.start:0),o):void 0}set cdkVirtualForTemplate(t){t&&(this._needsUpdate=!0,this._template=t)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(t){this._viewRepeater.viewCacheSize=E(t)}measureRangeSize(t,i){if(t.start>=t.end)return 0;const o=t.start-this._renderedRange.start,s=t.end-t.start;let r,a;for(let c=0;c<s;c++){const d=this._viewContainerRef.get(c+o);if(d&&d.rootNodes.length){r=a=d.rootNodes[0];break}}for(let c=s-1;c>-1;c--){const d=this._viewContainerRef.get(c+o);if(d&&d.rootNodes.length){a=d.rootNodes[d.rootNodes.length-1];break}}return r&&a?le(i,"end",a)-le(i,"start",r):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const t=this._differ.diff(this._renderedItems);t?this._applyChanges(t):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((t,i)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(t,i):i)),this._needsUpdate=!0)}_changeDataSource(t,i){return t&&t.disconnect(this),this._needsUpdate=!0,i?i.connect(this):(0,Z.of)()}_updateContext(){const t=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const o=this._viewContainerRef.get(i);o.context.index=this._renderedRange.start+i,o.context.count=t,this._updateComputedContextProperties(o.context),o.detectChanges()}}_applyChanges(t){this._viewRepeater.applyChanges(t,this._viewContainerRef,(s,r,a)=>this._getEmbeddedViewArgs(s,a),s=>s.item),t.forEachIdentityChange(s=>{this._viewContainerRef.get(s.currentIndex).context.$implicit=s.item});const i=this._data.length;let o=this._viewContainerRef.length;for(;o--;){const s=this._viewContainerRef.get(o);s.context.index=this._renderedRange.start+o,s.context.count=i,this._updateComputedContextProperties(s.context)}}_updateComputedContextProperties(t){t.first=0===t.index,t.last=t.index===t.count-1,t.even=t.index%2==0,t.odd=!t.even}_getEmbeddedViewArgs(t,i){return{templateRef:this._template,context:{$implicit:t.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index:i}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.s_b),e.Y36(e.Rgc),e.Y36(e.ZZ4),e.Y36(te),e.Y36(se,4),e.Y36(e.R0b))},n.\u0275dir=e.lG2({type:n,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[e._Bn([{provide:te,useClass:Ve}])]}),n})(),re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})(),Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[ee,re],ee,re]}),n})();const et=["viewportmain"],tt=["viewportsplit"];function it(n,l){1&n&&e.GkF(0)}function nt(n,l){1&n&&e.GkF(0)}function ot(n,l){1&n&&e.GkF(0)}function st(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.everything()}),e._UZ(3,"i",11),e._uU(4," Everything "),e.qZA(),e.TgZ(5,"div",12),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.opensplitview()}),e._UZ(6,"i",13),e._uU(7," Splitview "),e.qZA(),e.TgZ(8,"div",14),e._uU(9),e.qZA(),e.TgZ(10,"div",15),e.TgZ(11,"app-multiselect",16),e.NdJ("selectionChange",function(o){return e.CHM(t),e.oxw().log.filters.type.select(o)}),e.qZA(),e.qZA(),e.TgZ(12,"div",17),e._uU(13),e.qZA(),e.TgZ(14,"div",15),e.TgZ(15,"app-multiselect",18),e.NdJ("selectionChange",function(o){return e.CHM(t),e.oxw().log.filters.user.selected=o})("selectionChange",function(o){return e.CHM(t),e.oxw().log.filters.user.select(o)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",9),e.TgZ(17,"div",19),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.clear()}),e._UZ(18,"i",20),e._uU(19," Clear "),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(5),e.Gre("btn btn-sm ",t.log.splitview?"btn-success":"btn-light",""),e.xp6(4),e.hij(" Events (",(null==t.log.filters.type.selected?null:t.log.filters.type.selected.length)||t.log.filters.type.default.length,") "),e.xp6(2),e.Q6J("all",t.log.filters.type.default)("selection",t.log.filters.type.selected),e.xp6(2),e.hij(" Users (",(null==t.log.filters.user.selected?null:t.log.filters.user.selected.length)||t.log.filters.user.default.length,") "),e.xp6(2),e.Q6J("allunique",t.log.filters.user.default)("selection",t.log.filters.user.selected)}}function lt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",41),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).log.scrolltobottom()}),e._uU(1),e._UZ(2,"i",42),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.log.message," ")}}function rt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",22),e.TgZ(2,"div",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.livetoggle()}),e._UZ(3,"i"),e._uU(4," LIVE "),e.qZA(),e.qZA(),e.TgZ(5,"div",24),e.TgZ(6,"span"),e._UZ(7,"i",25),e.qZA(),e.TgZ(8,"input",26),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().log.filters.search.text=o})("ngModelChange",function(o){return e.CHM(t),e.oxw().log.filters.search.input(o)}),e.qZA(),e.TgZ(9,"span",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.filters.search.clear()}),e._UZ(10,"i",28),e.qZA(),e.qZA(),e.TgZ(11,"div",29),e.TgZ(12,"div",30),e.TgZ(13,"div",31),e.TgZ(14,"span",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().log.filters.limit.toggle()}),e._UZ(15,"i",33),e._uU(16,"\xa0 Limit to Last"),e.qZA(),e.TgZ(17,"input",34),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().log.filters.limit.number=o})("ngModelChange",function(o){return e.CHM(t),e.oxw().log.filters.limit.input(o)}),e.qZA(),e.TgZ(18,"span",35),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",36),e.TgZ(21,"span",37),e._UZ(22,"i",38),e._uU(23,"\xa0 RAM "),e.qZA(),e.TgZ(24,"input",39),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().log.maxsize=o})("focusout",function(){return e.CHM(t),e.oxw().log.filters.size.input()}),e.qZA(),e.TgZ(25,"span",35),e._uU(26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(27,lt,3,1,"div",40),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Gre("bi bi-circle-fill ignoretheme\n          ",t.log.live?"text-danger red-light-shadow":"text-secondary",""),e.xp6(3),e.Gre("input-group-text btn-light  pe-none ",t.log.filters.search.text?"bg-success":"bg-light",""),e.xp6(2),e.Q6J("ngModel",t.log.filters.search.text),e.xp6(6),e.Gre("input-group-text  cursor-pointer ",t.log.filters.limit.active?"btn-success":"btn-light",""),e.xp6(3),e.Q6J("ngModel",t.log.filters.limit.number),e.xp6(2),e.hij(" / ",t.log.logslist.length," logs "),e.xp6(5),e.Q6J("ngModel",t.log.maxsize),e.xp6(2),e.hij(" / ",t.log.currentsize," MB "),e.xp6(1),e.Q6J("ngIf",t.log.message)}}function at(n,l){if(1&n&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.type," ")}}function ct(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",49),e.TgZ(1,"div",50),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).log.opensplitview(s)}),e.TgZ(2,"span",51),e._uU(3),e.qZA(),e.TgZ(4,"span",52),e._uU(5),e.qZA(),e.YNc(6,at,2,1,"span",53),e.TgZ(7,"span",54),e._uU(8),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(1),e.Gre("w-100 text-clr2 ",t.focused==i.log.focusedlogsymbol&&"line-focused",""),e.xp6(2),e.hij(" ",t.time," "),e.xp6(2),e.hij(" ",t.size," "),e.xp6(1),e.Q6J("ngIf",t.type),e.xp6(2),e.hij("",t.other," ")}}function dt(n,l){1&n&&e.GkF(0)}function gt(n,l){if(1&n&&(e.TgZ(0,"div",56),e.YNc(1,dt,1,0,"ng-container",2),e.qZA()),2&n){e.oxw(3);const t=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function ut(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",44),e.TgZ(2,"div"),e.TgZ(3,"cdk-virtual-scroll-viewport",45,46),e.YNc(5,ct,9,7,"div",47),e.ALo(6,"async"),e.qZA(),e.qZA(),e.YNc(7,gt,2,1,"div",48),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Gre(" h-100 ",t.log.splitview?"w-50":"w-100",""),e.xp6(3),e.Q6J("cdkVirtualForOf",e.lcZ(6,5,t.logobservable)),e.xp6(2),e.Q6J("ngIf",t.log.splitview)}}function ht(n,l){if(1&n&&e.YNc(0,ut,8,7,"ng-container",43),2&n){const t=e.oxw();e.Q6J("ngIf",t.log.show)}}function pt(n,l){if(1&n&&(e.TgZ(0,"span",55),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t[0]?null:t[0].type," ")}}function ft(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",57),e.TgZ(2,"div",58),e.TgZ(3,"span",51),e._uU(4),e.qZA(),e.TgZ(5,"span",52),e._uU(6),e.qZA(),e.YNc(7,pt,2,1,"span",53),e.TgZ(8,"span",59),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){const t=l.$implicit;e.xp6(4),e.hij(" ",null==t[0]?null:t[0].time," "),e.xp6(2),e.hij(" ",null==t[0]?null:t[0].size," "),e.xp6(1),e.Q6J("ngIf",null==t[0]?null:t[0].type),e.xp6(2),e.Oqu(null==t[0]?null:t[0].other)}}function mt(n,l){if(1&n&&(e.YNc(0,ft,10,4,"ng-container",43),e.ALo(1,"async")),2&n){const t=e.oxw();e.Q6J("ngIf",e.lcZ(1,1,t.splitlogobservable))}}let _t=(()=>{class n{constructor(t){this.logservice=t,this.utility={dataobjmaker:i=>{let o=i.split("|"),s=o[0].split(" ");return this.utility.timeregx(s[0])?{time:s[0],size:s[1],type:o[1],other:o.slice(2).join(" | ")}:{other:i}},parselog:i=>{let a=i.match(/\d{2}:\d{2}:\d{2}[.]\d+/);a=a?a[0]:null;let c=i.match(/[(]\d+[)]/);c=c?c[0]:null;let d=this.log.filters.type.default.filter(u=>i.includes(u)),_=i.split(/\n\d{2}:\d{2}:\d{2}[.]\d+ [(]\d+[)][|][A-Z_]+/).join("");return{time:a,size:c,type:d[0],other:_}},debouncevalue:null,debouncer:(i,o)=>{clearTimeout(this.utility.debouncevalue),this.utility.debouncevalue=setTimeout(()=>{i()},o)},onlyLetters:function(i){return i.match("^[0-9]+$")},timeregx:function(i){return i.match(/[0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]{1,3})?/)},propextractor:function(i){return{Id:i.Id,Operation:i.Operation,Status:i.Status,Size:i.LogLength,Duration:i.DurationMilliseconds,User:i.LogUser.Name,Time:i.StartTime}},colinfo:["Operation","Status","Size","User","Duration","Time","view"]},this.log={focusedlog:[],recievedlogcount:0,logslist:[],loglines:[],logsfiltered:[],loglinesfiltered:[],linecount:0,maxsize:100,currentsize:0,info:[],live:!1,show:!0,message:"",timeinitial:null,timelatest:null,startid:null,endid:null,splitview:!1,poll:null,get:()=>{this.logservice.getlogsforwatcher("taillogs").subscribe(i=>{if(!i)return;this.logservice.getnotification(i);let o=i.records.reverse();if(this.log.startid){let a=o.map(c=>c.Id).indexOf(this.log.startid);o.splice(0,a+1)}let s=o.map(a=>({id:a.Id,user:{name:a.LogUser.Name,id:a.LogUser.attributes.url.split("/").slice(-1)[0]},size:a.LogLength,time:a.StartTime}));this.log.info=s.slice(),this.log.endid=this.log.info.length>0?this.log.info.slice(-1)[0].id:this.log.startid,s=s.filter(a=>!this.log.filters.info.ids.includes(a.id));let r=s.map(a=>this.logservice.getlogbody(a.id,!0));(0,q.D)(r).subscribe(a=>{this.log.onLogUpdate(a)},a=>{this.log.live=!1},()=>{})},i=>{this.log.live=!1},()=>{})},reload:()=>{this.log.show=!1,setTimeout(()=>{this.log.show=!0},0),P.c.log("refreshed")},clear:()=>{this.log.reload(),this.log.focusedlog=[],this.log.logslist=[],this.log.loglines=[],this.log.logsfiltered=[],this.log.loglinesfiltered=[],this.log.splitview=!1,this.log.info=[],this.log.startid=this.log.endid,this.splitlogobservable.next([]),this.log.filters.info.ids=[],this.log.filters.info.user=[],this.log.filters.applyonlogs(),this.log.updateObserverable(),this.log.currentsize=0},everything:()=>{this.log.filters.user.selected=[],this.log.filters.type.selected=[],this.log.filters.user.selectedids=[],this.log.filters.localsearchkey=this.log.filters.search.text="",this.log.filters.limit.active=!1,this.log.filters.applyonlogs()},scrolltobottom:()=>{this.viewPort.scrollToIndex(this.log.linecount)},filters:{key:"",localsearchkey:"",applyonloglines:()=>{let i=this.log.filters.search.text.split(";");i.length>1&&""==i.slice(-1)[0]&&i.pop();let o=s=>0==this.log.filters.type.selected.length||this.log.filters.type.selected.includes(s.type);this.log.loglinesfiltered=this.log.logsfiltered.slice().filter(s=>i.some(r=>JSON.stringify(s).toLowerCase().includes(r.toLowerCase()))&&o(s)),this.log.updateObserverable()},applyonlogs:()=>{let i=this.log.filters.search.text.split(";");i.length>1&&""==i.slice(-1)[0]&&i.pop();let o=this.log.filters.limit.active?-1*this.log.filters.limit.number:0,s=this.log.filters.info.user.slice(o);this.log.logsfiltered=this.log.logslist.slice(o).filter((r,a)=>r.length>0&&0==this.log.filters.user.selected.length||this.log.filters.user.selectedids.includes(s[a])).reduce((r,a)=>[...r,...a],[]).filter(r=>Object.values(r).some(a=>a)),this.log.filters.applyonloglines()},info:{ids:[],user:[]},user:{default:[],selected:[],selectedids:[],select:i=>{this.log.filters.user.selected=i,this.log.filters.user.selectedids=i.map(o=>o.id),this.log.filters.applyonlogs()}},type:{default:p.gT.debuglogs.taillogs.filter.type.default,selected:[],select:i=>{this.log.filters.type.selected=i,this.log.filters.applyonloglines()}},search:{text:"",input:i=>{this.utility.debouncer(this.log.filters.applyonloglines,700)},clear:()=>{this.log.filters.search.text=""}},limit:{active:!0,toggle:()=>{this.log.filters.limit.number<1?(v.y.maketoast({template:"warning",body:"Limit should be grater than zero"}),this.log.filters.limit.active=!1):(this.log.filters.limit.active=!this.log.filters.limit.active,this.log.filters.applyonlogs())},number:100,max:100,input:i=>{this.log.filters.limit.number=i>0?i:this.log.filters.limit.active=!1,this.log.filters.limit.active&&this.utility.debouncer(this.log.filters.applyonlogs,700)},updatelimit:()=>{this.log.filters.limit.max=this.log.filters.info.ids.length}},size:{input:()=>{this.log.maxsize<1&&(this.log.maxsize=1),this.log.updatefiltersdata()}}},focusedlogsymbol:Symbol(),opensplitview:i=>{if(i){this.log.splitview=!0;let o=[i.other.split("*")[0],...i.other.split("*").slice(1).reduce((s,r)=>[...s,{other:r}],[])];this.log.focusedlog=[{time:i.time,size:i.size,type:i.type,other:i.other.split("*")[0]},...o],this.splitlogobservable.next(this.log.focusedlog),setTimeout(()=>{this.log.focusedlogsymbol=i.focused=Symbol()},0)}else this.log.splitview=!this.log.splitview;setTimeout(()=>{this.viewPortsplit&&this.viewPortsplit.checkViewportSize()},10)},livetoggle:()=>{this.log.live=!this.log.live,this.logservice.watchers.taillogs=this.log.live,clearInterval(this.log.poll),this.log.live&&(this.log.poll=setInterval(this.log.get,1e4))},onLogUpdate:i=>{this.log.updatedata(i),this.log.updatefiltersdata(),this.log.message=`${i.length} new log${i.length>1?"s":""}  recieved`,setTimeout(()=>{this.log.message=""},5e3)},updatedata:i=>{const o=/\n\d{2}:\d{2}:\d{2}[.]\d+ [(]\d+[)]/g,s="\xbe\xfe\xb6\xd96$\xab>\xafW\xdex[\u0192\xfa\u2030\xc7\xd4X_\xa7\xa9i\xad\xb7\xde;\xa5\xee\u017e\xdb\xd2";let a=i.map(c=>c.replace(o,s+"$&").split(s).map(d=>this.utility.parselog(d)));this.log.logslist.push(...a)},updatefiltersdata:()=>{let o=0,s=this.log.startid,r=0;for(let a=this.log.info.length-1;a>-1;a--){const c=this.log.info[a],d=o+c.size/1048576;if(!(d<this.log.maxsize)){r>0?(this.log.startid=this.log.info.slice(-1*(r+1))[0].id,this.log.info=this.log.info.slice(-1*r),this.log.logslist=this.log.logslist.slice(-1*r)):(this.log.startid=this.log.info.slice(-1)[0].id,this.log.info=[],this.log.logslist=[]);break}o=d,r+=1,s=c.id}this.log.currentsize=parseFloat(o.toFixed(4)),this.log.filters.info.user=this.log.info.map(a=>a.user.id),this.log.filters.info.ids=this.log.info.map(a=>a.id),this.log.filters.applyonlogs()},updateObserverable:()=>{let i=this.log.loglinesfiltered;this.log.linecount=i.length,this.logobservable.next(i)},fullscreen:!1,fullscreentoggle:()=>{this.log.fullscreen=!this.log.fullscreen}},this.logobservable=new J.X(this.log.loglinesfiltered),this.splitlogobservable=new J.X(this.log.focusedlog)}ngOnInit(){this.logservice.getalllogs().subscribe(i=>{i.records.length>0&&(this.log.startid=i.records[0].Id)}),this.logservice.getusers().subscribe(i=>{let o=i.records.map(s=>({name:s.Name,id:s.Id,username:s.Username}));this.log.filters.user.default=function t(i){let o=[],s=[];return i.map(r=>{o.includes(r.name)?s.push(r.name):o.push(r.name)}),i.map(r=>{s.includes(r.name)&&(r.name=r.name+` (${r.username})`)}),i}(o)}),this.log.livetoggle()}ngOnDestroy(){this.logservice.watchers.taillogs=!1,clearInterval(this.log.poll)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-taillogs"]],viewQuery:function(t,i){if(1&t&&(e.Gf(et,5),e.Gf(tt,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.viewPort=o.first),e.iGM(o=e.CRH())&&(i.viewPortsplit=o.first)}},decls:14,vars:3,consts:[[1,"h-100"],["container",""],[4,"ngTemplateOutlet"],["id","logbox",1,"text-clr2","h-100-80","text-small","p-2","bg-black","rounded",2,"border","2px solid #2e2e2d","filter","invert(1)"],["header",""],["footer",""],["test",""],["viewport2",""],[1,"rounded-top","w-100","d-flex","justify-content-between","p-1"],[1,"btn-group"],["id","everythingbtn",1,"btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-lightning-charge-fill"],["id","splitviewbtn",3,"click"],[1,"bi","bi-layout-split"],["data-bs-toggle","dropdown","id","eventsbtn",1,"btn","btn-sm","btn-light"],[1,"dropdown-menu","w-100","bg-transparent","p-0"],[3,"all","selection","selectionChange"],["data-bs-toggle","dropdown","id","usersbtn",1,"btn","btn-sm","btn-light","rounded-end"],[3,"allunique","selection","selectionChange"],["id","clearbtn",1,"btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-backspace"],[1,"d-flex","justify-content-between","rounded-bottom","p-1"],["id","live",1,"btn-group"],["id","livebtn",1,"btn","btn-sm","btn-light","me-1",3,"click"],["id","globalsearch",1,"col","input-group","input-group-sm"],[1,"bi","bi-search"],["type","text","placeholder","type multiple keywords separated by (;)",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text","btn-light","cursor-pointer",3,"click"],[1,"bi","bi-x"],[1,"col","d-md-block","d-xl-block","d-none"],[1,"d-flex"],["id","limitfilter",1,"col","input-group","input-group-sm","ms-2"],[3,"click"],[1,"bi","bi-funnel-fill"],["type","number","min","1",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-text","btn-light","pe-none"],["id","memoryfilter",1,"col","input-group","input-group-sm","ms-2"],[1,"input-group-text","btn-success","cursor-pointer"],[1,"bi","bi-sd-card"],["type","number","min","1",1,"form-control",3,"ngModel","ngModelChange","focusout"],["class","btn btn-sm btn-success ms-2",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","ms-2",3,"click"],[1,"bi","bi-bell-fill"],[4,"ngIf"],[1,"d-flex","h-100"],["id","scrl","itemSize","30",1,"h-100","bg-black","w-100-virtualscroll"],["viewportmain",""],["style","overflow-x: hidden; overflow-y: auto; height: 30px","class","bg-black text-x p-1 terminal-text text-break",4,"cdkVirtualFor","cdkVirtualForOf"],["class","h-100 w-50",4,"ngIf"],[1,"bg-black","text-x","p-1","terminal-text","text-break",2,"overflow-x","hidden","overflow-y","auto","height","30px"],[2,"line-height","1.32rem",3,"click"],[1,"text-info"],[1,"text-orange"],["class","bg-secondary px-2 me-1",4,"ngIf"],[1,"text-x"],[1,"bg-secondary","px-2","me-1"],[1,"h-100","w-50"],[1,"bg-black","w-100","h-100","overflow-auto","px-2"],[1,"w-100","text-clr2","terminal-text"],[1,"text-x",2,"white-space","pre-wrap"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,it,1,0,"ng-container",2),e.TgZ(3,"div",3),e.YNc(4,nt,1,0,"ng-container",2),e.qZA(),e.YNc(5,ot,1,0,"ng-container",2),e.qZA(),e.YNc(6,st,20,9,"ng-template",null,4,e.W1O),e.YNc(8,rt,28,15,"ng-template",null,5,e.W1O),e.YNc(10,ht,1,1,"ng-template",null,6,e.W1O),e.YNc(12,mt,2,3,"ng-template",null,7,e.W1O)),2&t){const o=e.MAs(7),s=e.MAs(9),r=e.MAs(11);e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(2),e.Q6J("ngTemplateOutlet",r),e.xp6(1),e.Q6J("ngTemplateOutlet",s)}},directives:[h.tP,j.z,f.Fj,f.JJ,f.On,f.qQ,f.wV,h.O5,se,je,Xe],pipes:[h.Ov],styles:[".item-h-auto[_ngcontent-%COMP%]{height:28px!important}.item-h-auto[_ngcontent-%COMP%]:hover{height:-moz-fit-content;height:fit-content}.terminal-text[_ngcontent-%COMP%]{font-family:Fira Code,monospace;line-height:1.2em;font-weight:700}.btn.btn-dark.dropdown-toggle.show[_ngcontent-%COMP%]{background-color:#198754;border-radius:0}.introscreen[_ngcontent-%COMP%]{background:#ffffff00}.i-bubble[_ngcontent-%COMP%]{transition:all .6s;background-color:#1d1d1de7}.transition-600[_ngcontent-%COMP%]{transition:all .6s}.transition-200[_ngcontent-%COMP%]{transition:all .2s}.shadow-btn[_ngcontent-%COMP%]{box-shadow:0 0 100px 300px #07bdff63}.hide-child[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{visibility:hidden!important}.top-1[_ngcontent-%COMP%]{z-index:1}.line-focused[_ngcontent-%COMP%]{background-color:#ffc107}.line-focused[_ngcontent-%COMP%]   .text-info[_ngcontent-%COMP%]{color:#004789!important}.line-focused[_ngcontent-%COMP%]   .text-orange[_ngcontent-%COMP%]{color:#008289!important}.line-focused[_ngcontent-%COMP%]   .text-x[_ngcontent-%COMP%]{color:#000!important}.text-x[_ngcontent-%COMP%]{word-break:break-all}.f-nowrap[_ngcontent-%COMP%]{flex:nowrap}"]}),n})();var m=g(2897),D=g(3513);const vt=["openview"],bt=["logtable"];function xt(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",6),e._UZ(2,"i",7),e.qZA(),e.TgZ(3,"div",8),e.TgZ(4,"app-multiselect",9),e.NdJ("selectionChange",function(o){return e.CHM(t),e.oxw().columnfilter.select(o)}),e.qZA(),e.qZA(),e.TgZ(5,"div",10),e._UZ(6,"table",11,12),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("all",t.columnfilter.all)("selection",t.columnfilter.selection)("minimal",!0)}}const Ct=function(){return{viewWholeText:!0}};function Tt(n,l){if(1&n&&(e.TgZ(0,"kendo-treelist",13),e._UZ(1,"kendo-treelist-column",14),e._UZ(2,"kendo-treelist-column",15),e._UZ(3,"kendo-treelist-column",16),e._UZ(4,"kendo-treelist-column",17),e._UZ(5,"kendo-treelist-column",18),e._UZ(6,"kendo-treelist-column",19),e.qZA()),2&n){const t=e.oxw();e.Q6J("kendoTreeListHierarchyBinding",t.dataForTable)("initiallyExpanded",!0)("columnMenu",!0)("filterable",!0)("filter",t.state.filter),e.xp6(1),e.Q6J("width",100)("filterable",!1),e.xp6(1),e.Q6J("hidden",!0)("width",110)("filterable",!1),e.xp6(1),e.Q6J("hidden",!0)("width",160)("filterable",!1),e.xp6(1),e.Q6J("hidden",!0)("width",120)("filterable",!1),e.xp6(1),e.Q6J("width",200),e.xp6(1),e.Tol(e.DdM(20,Ct)),e.Q6J("expandable",!0)}}function wt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().view.switch()}),e._UZ(1,"i"),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("title","open"!==t.view.type?"open view":"grid view"),e.xp6(1),e.Gre("bi bi-","open"===t.view.type?"border-all":"border-style","")}}let yt=(()=>{class n{constructor(){this.close=new e.vpe,this.openviewswitch=!0,this.warnlimit=1e5,this.columnfilter={all:["time","microseconds","category","subcategory","objectId"],selection:["time","category"],select:t=>{this.realRender()}},this.listOps=[{text:"Includes",value:"eq"},{text:"Excludes",value:"neq"}],this.viewRendered=!1,this.categories=[],this.selectedValues=[],this.filterOperator=this.listOps[0],this.root={expanded:!0,leaf:!1,children:[],isHeader:!0,text:"TEXT",time:"TIME",microseconds:"MICROSECONDS",category:"CATEGORY",line:"LINE/SUBCAT",objectId:"OBJECTID"},this.debugOnlyRoot={expanded:!0,leaf:!1,children:[],isHeader:!0,text:"TEXT",time:"TIME",microseconds:"MICROSECONDS",category:"CATEGORY",line:"LINE/SUBCAT",objectId:"OBJECTID"},this.clearedInput="",this.indent=0,this.timeRegex=/\d\d:\d\d:\d\d\.\d*/i,this.microsecondsRegex=/\(\d\d*\)/i,this.categoryRegex=/\|[^|]*/i,this.subcategoryRegex=/\|\[\w*\]/i,this.objectIdRegex=/\|[A-Z0-9]{15}\|/i,this.warned=!1,this.userDebugCheckBox=!1,this.includeTimeCheckBox=!0,this.includeMicrosecondsCheckBox=!1,this.includeObjectIdCheckBox=!1,this.includeSubcategoryCheckBox=!1,this.includeCategoryCheckBox=!0,this.hideViewOptionDropdown=!1,this.textAreaContent=void 0,this.state={filter:{logic:"and",filters:[]}},this.dropDownList=["Tabular View","Open View"],this.view={type:"open",switch:()=>{this.view.type="open"==this.view.type?"tabular":"open",setTimeout(()=>{this.realRender()},100)}}}back(){this.logbody=[],this.close.emit()}ngOnInit(){setTimeout(()=>{this.realParse(this.logbody),this.realRender(),this.dataForTable=this.root.children},10)}realParse(t){delete this.root.children,delete this.debugOnlyRoot.children,this.root.children=[],this.debugOnlyRoot.children=[],this.nodeStack=[this.root],this.debugNodeStack=[this.debugOnlyRoot];var i=t.split("\n");this.indent=0;for(var s=0;s<i.length;s++){var r=i[s];if(this.timeRegex.test(r)){var a=this.parseLine(r,!1,r.indexOf("USER_DEBUG")>0);if(r.indexOf("USER_DEBUG")>0){for(;!this.timeRegex.test(i[++s]);)a=this.parseLine(i[s],!0,!1);--s}if(r.indexOf("CUMULATIVE_LIMIT_USAGE")>0&&r.indexOf("CUMULATIVE_LIMIT_USAGE_END")<0){for(;i[++s].indexOf("CUMULATIVE_LIMIT_USAGE_END")<0;)a.children.push({time:"",line:"",microseconds:"",objectId:"",parentId:"",category:"",leaf:!0,text:"\r\n"+i[s],isEntry:!1,isExit:!1,isException:!1,isDebug:!1});--s}}}this.openviewswitch=!1,setTimeout(()=>{this.openviewswitch=!0},10)}parseLine(t,i,o){let s=this.format(this.categoryRegex.exec(t));!this.categories.includes(s)&&""!=s&&this.categories.push(s);var r={leaf:!1,children:[],time:this.format(this.timeRegex.exec(t)),microseconds:this.format(this.microsecondsRegex.exec(t)),category:this.format(this.categoryRegex.exec(t)),line:this.format(this.subcategoryRegex.exec(t)),objectId:this.format(this.objectIdRegex.exec(t)),parentId:null,isEntry:!1,isExit:!1,isException:!1,isDebug:!1,icon:"",text:"",expanded:!0};return 0===(t=(t=(t=(t=(t=t.replace(this.timeRegex,"")).replace(this.microsecondsRegex,"")).replace(this.categoryRegex,"")).replace(this.subcategoryRegex,"")).replace(this.objectIdRegex,"")).trim().length&&(t=r.category),r.isDebug=1==i,r.category.length>0&&(/METHOD_ENTRY|CONSTRUCTOR_ENTRY|DML_BEGIN|SOQL_EXECUTE_BEGIN|CODE_UNIT_STARTED|VF_DESERIALIZE_VIEWSTATE_BEGIN|CUMULATIVE_LIMIT_USAGE/.test(r.category)?r.isEntry=!0:/METHOD_EXIT|CONSTRUCTOR_EXIT|DML_END|SOQL_EXECUTE_END|CODE_UNIT_FINISHED|VF_DESERIALIZE_VIEWSTATE_END|CUMULATIVE_LIMIT_USAGE_END/.test(r.category)?r.isExit=!0:/EXCEPTION_THROWN|FATAL_ERROR/.test(r.category)?(r.isException=!0,r.icon="http://extjs-public.googlecode.com/svn/tags/extjs-4.1.1a/release/resources/themes/images/default/form/exclamation.gif"):/USER_DEBUG/.test(r.category)&&(r.isDebug=!0,r.icon="http://extjs-public.googlecode.com/svn/tags/extjs-4.1.1a/release/resources/themes/images/default/shared/warning.gif")),this.pushNodeAfterFormatting(r,i,o,t),this.indent<0&&(t+=" NEGATIVE INDENT "),r.text=this.format([t]),r}format(t){if(t&&t[0]){var i=t[0];return null==i?"":i.replace(/\|/,"").replace(/\|$/,"").replace(/&#(\d+);/g,function(o,s){return String.fromCharCode(s)})}return""}realRender(){if("open"==this.view.type){const t=this.openview.nativeElement;if(t.innerHTML="",!this.root.children||0==this.root.children.length)return;this.renderNode(t,this.root,-1,this.columnfilter.selection.includes("time"),this.columnfilter.selection.includes("microseconds"),this.columnfilter.selection.includes("category"),this.columnfilter.selection.includes("subcategory"),this.columnfilter.selection.includes("objectId"),0),t.className="w-100"}}renderNode(t,i,o,s,r,a,c,d,_){var u=document.createElement("tr");i.tr=u,u.node=i,s&&this.createCell(u,i.time,void 0,void 0),r&&this.createCell(u,i.microseconds,void 0,void 0),d&&this.createCell(u,i.objectId,void 0,void 0),c&&this.createCell(u,i.line,void 0,void 0),a&&this.createCell(u,i.category,void 0,void 0);var de=30*o;if(this.userDebugCheckBox&&(de=0),this.createCell(u,i.text,de,i.isEntry&&!i.leaf),i.isException?u.className="exception":i.isDebug?u.className="debug":i.isHeader?(u.className="header",u.style.position="sticky",u.style.top="0",u.style.zIndex="1",u.style.backgroundColor="#c3c4c7"):u.className="logRow",this.userDebugCheckBox&&"debug"!=u.className&&"header"!=u.className&&(u.style.display="none"),t.appendChild(u),this.viewRendered=!0,i.children)for(var B=0;B<i.children.length;B++)this.renderNode(t,i.children[B],o+1,s,r,a,c,d,_++)}createCell(t,i,o,s){var r=document.createElement("td");if(r.className="logCell",s){var a=document.createElement("img");a.src="../../../../../assets/collapse.png",a.onclick=this.handleToggle.bind(this),r.appendChild(a)}r.appendChild(document.createTextNode(i)),o&&o>0&&(r.style.paddingLeft=o+"px"),t.appendChild(r)}handleToggle(t){var i=t||window.event,r=(i.target?i.target:i.srcElement).parentElement.parentElement.node,a=!r.expanded;r.expanded=a,r.tr.children[r.tr.children.length-1].children[0].src=a?"../../../../../assets/collapse.png":"../../../../../assets/expand.png",r.tr.style.backgroundColor=a?"#eee":"#fdf",this.toggle(r,a)}toggle(t,i){for(var o=0;t.children&&o<t.children.length;o++){var s=t.children[o];i?(s.tr.style.display="",s.expanded&&this.toggle(s,i)):(s.tr.style.display="none",this.toggle(s,i))}}pushNodeAfterFormatting(t,i,o,s){if(t.isEntry)this.indent++,this.nodeStack[this.nodeStack.length-1].children.push(t),this.nodeStack.push(t);else if(t.isExit){this.indent--;var r=this.nodeStack.pop();0===r.children.length?r.leaf=!0:r.expanded=!0}else t.leaf=!0,this.nodeStack[this.nodeStack.length-1].children.push(t);if(i||o){var a=Object.assign({},t);a.text=this.format([s]),this.debugNodeStack[this.debugNodeStack.length-1].children.push(a)}}distinctCategories(t){t.forEach(i=>{null!=i.category&&!this.categories.includes(i.category)&&""!=i.category&&(this.categories.push(i.category),null!=i.children&&i.children.length>0&&this.distinctCategories(i.children))})}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-log-viewer"]],viewQuery:function(t,i){if(1&t&&(e.Gf(vt,5),e.Gf(bt,7)),2&t){let o;e.iGM(o=e.CRH())&&(i.openview=o.first),e.iGM(o=e.CRH())&&(i.outputTable=o.first)}},inputs:{logbody:"logbody",logsize:"logsize"},outputs:{close:"close"},decls:7,vars:3,consts:[[4,"ngIf","ngIfElse"],["tabularview",""],[1,"d-flex","py-1"],["title","Back",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-box-arrow-left"],["class","btn btn-light btn-sm me-1",3,"title","click",4,"ngIf"],["data-bs-toggle","dropdown","id","eventsbtn",1,"btn","btn-sm","dropdown-toggle","mergeinheader"],[1,"bi","bi-layout-three-columns"],[1,"dropdown-menu","w-100","bg-transparent","p-0","border-0"],[3,"all","selection","minimal","selectionChange"],[1,"text-small","h-100-40","bg-inherit","overflow-auto"],["id","openview"],["openview",""],["childrenField","children","kendoTreeListExpandable","",1,"text-small","h-100-40","bg-inherit",3,"kendoTreeListHierarchyBinding","initiallyExpanded","columnMenu","filterable","filter"],["field","time","title","TIME",3,"width","filterable"],["field","microseconds","title","MICROSECONDS",3,"hidden","width","filterable"],["field","objectId","title","OBJECTID",3,"hidden","width","filterable"],["field","line","title","LINE/SUBCAT",3,"hidden","width","filterable"],["field","category","title","CATEGORY",3,"width"],["field","text","title","TEXT",3,"expandable"],[1,"btn","btn-light","btn-sm","me-1",3,"title","click"]],template:function(t,i){if(1&t&&(e.YNc(0,xt,8,3,"ng-container",0),e.YNc(1,Tt,7,21,"ng-template",null,1,e.W1O),e.TgZ(3,"div",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return i.back()}),e._UZ(5,"i",4),e.qZA(),e.YNc(6,wt,2,4,"button",5),e.qZA()),2&t){const o=e.MAs(2);e.Q6J("ngIf","open"===i.view.type)("ngIfElse",o),e.xp6(6),e.Q6J("ngIf",i.logsize<i.warnlimit)}},directives:[h.O5,j.z,m.auY,D.$ow,D.N6L,D.i9m,D.bg4],styles:[".mergeinheader[_ngcontent-%COMP%]{position:absolute;right:0;z-index:2;padding-top:0;padding-right:1rem}"]}),n})();function St(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-log-viewer",2),e.NdJ("close",function(){return e.CHM(t),e.oxw().logs.body.close()}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("logbody",t.logs.logbody)("logsize",t.logs.logsize)}}function kt(n,l){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.startdate))}}function Dt(n,l){1&n&&e.YNc(0,kt,3,3,"ng-template",5)}function Zt(n,l){if(1&n&&(e.TgZ(0,"kendo-grid-column",12),e.YNc(1,Dt,1,0,void 0,13),e.qZA()),2&n){const t=l.$implicit;e.Q6J("field",t.key)("title",t.value.title)("filter",t.value.type)("filterable",t.value.show),e.xp6(1),e.Q6J("ngIf","startdate"==t.key)}}function Et(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",14),e.TgZ(1,"div",15),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).logs.grid.events.open(s)}),e._UZ(2,"i",16),e.qZA(),e.TgZ(3,"div",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).logs.grid.events.openraw(s)}),e._UZ(4,"i",18),e.qZA(),e.TgZ(5,"div",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).logs.grid.events.download(s)}),e._UZ(6,"i",20),e.qZA(),e.qZA()}}function Mt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"kendo-grid",3),e.YNc(1,Zt,2,5,"kendo-grid-column",4),e.ALo(2,"keyvalue"),e.TgZ(3,"kendo-grid-column"),e.YNc(4,Et,7,0,"ng-template",5),e.qZA(),e.qZA(),e.TgZ(5,"div",6),e.TgZ(6,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().logs.setlive()}),e._UZ(7,"i"),e._uU(8," LIVE "),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().logs.grid.events.refresh("refresh")}),e._UZ(10,"i",9),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){return e.CHM(t),e.oxw().logs.grid.events.clear()}),e._UZ(12,"i",11),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("kendoGridBinding",t.logs.loglistdata)("scrollable",!0)("filter",t.state.filter)("filterable","menu"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,8,t.logs.loglistformat)),e.xp6(6),e.Gre("bi bi-circle-fill ignoretheme\n          ",t.logs.live?"text-danger red-light-shadow":"text-secondary","")}}let At=(()=>{class n{constructor(t){this.service=t,this.state={filter:{logic:"and",filters:[]}},this.logs={loglistdata:[],logbody:"",logsize:0,logcount:0,logbodies:[],loglistformat:p.gT.debuglogs.logs.loglistformat,subscriptions:new R.w0,subscriptions2:new R.w0,live:x.X.datatemp.tasks.poll.active,setlive:()=>{x.X.operation.tasks.poll.stop(),this.logs.live=!this.logs.live,this.service.watchers.debuglogs=this.logs.live,x.X.datatemp.tasks.poll.active=this.logs.live,this.logs.live&&(x.X.datatemp.tasks.poll.interval=setInterval(this.logs.grid.events.refresh,1e4))},clearfromid:null,responseconsumer:i=>{if(!i)return;let o=i.records;if(this.logs.clearfromid){const s=o.map(r=>r.Id).indexOf(this.logs.clearfromid);o=o.slice(0,s)}o=o.map(s=>{let r=new Date(s.StartTime),a=r.getUTCFullYear()+"/"+(r.getMonth()+1)+"/"+r.getUTCDate(),c=r.toLocaleTimeString();return{id:s.Id,user:s.LogUser.Name,operation:s.Operation,duration:s.DurationMilliseconds,logsize:s.LogLength,startdate:new Date(a),starttime:c,status:s.Status,body:null}}),this.logs.loglistdata=o,this.logs.logcount=o.length,this.service.getnotification(i)},grid:{events:{download:i=>{this.logs.getlogbody(i.id,o=>{this.service.downloadfile(o,"text/csv",i.id)})},open:i=>{x.X.operation.support.update_count({logs:!0}),this.logs.logsize=i.logsize,i.logsize>1e5?v.y.ask({question:"log is heavy, this could hamper the performance of extension do you want to proceed?",callback:()=>{v.y.dialogprompt=null,this.logs.getlogbody(i.id,s=>{this.logs.logbody=s})}}):(()=>{this.logs.getlogbody(i.id,s=>{this.logs.logbody=s})})()},openraw:i=>{this.logs.getlogbody(i.id,o=>{this.service.downloadfile(o)})},refresh:i=>{this.logs.subscriptions2.add(this.service.getlogsforwatcher("debuglogs").subscribe(o=>{"refresh"==i&&v.y.maketoast({template:"SUCCESS",body:"Refreshed."}),this.logs.responseconsumer(o)}))},clear:()=>{v.y.maketoast({template:"SUCCESS",body:"Cached Logs Deleted"}),this.logs.loglistdata.length&&(this.logs.clearfromid=this.logs.loglistdata[0].id,this.logs.loglistdata=[])}}},body:{close:()=>{this.logs.logbody=null},prompt:{show:!1,toggle:i=>{if(null!=i)return this.logs.body.prompt.show=i;this.logs.body.prompt.show=null!=i&&i||!this.logs.body.prompt.show}}},getlogbody:(i,o)=>{this.logs.logbodies[i]?o(this.logs.logbodies[i]):this.logs.subscriptions.add(this.service.getlogbody(i).subscribe(s=>{this.logs.logbodies[i]=s,o(s)}))}}}ngOnInit(){this.logs.grid.events.refresh("")}ngOnDestroy(){this.logs.subscriptions.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-logs"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["templatelogs",""],[3,"logbody","logsize","close"],["sortable","true",1,"text-small","h-100-40",2,"background-color","inherit !important",3,"kendoGridBinding","scrollable","filter","filterable"],[3,"field","title","filter","filterable",4,"ngFor","ngForOf"],["kendoGridCellTemplate",""],[1,"d-flex","py-1"],["id","livebtn",1,"btn","btn-sm","btn-light","mx-1",3,"click"],["title","Refresh","id","refreshbtn",1,"btn","btn-sm","btn-light","me-1",3,"click"],[1,"bi","bi-arrow-clockwise"],["title","Clear","id","cleanbtn",1,"btn","btn-sm","btn-danger","me-1",3,"click"],[1,"bi","bi-backspace"],[3,"field","title","filter","filterable"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["id","openbtnx","title","Open",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-arrow-right-square"],["id","rawbtnx","title","Open raw",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-filetype-raw"],["id","downloadbtnx","title","Download",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-download"]],template:function(t,i){if(1&t&&(e.YNc(0,St,2,2,"ng-container",0),e.YNc(1,Mt,13,10,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",i.logs.logbody)("ngIfElse",o)}},directives:[h.O5,yt,m.MwP,m.HWw,h.sg,m.bg4,m.Ztq],pipes:[h.Nd,h.uU],styles:[""]}),n})(),ae=(()=>{class n{constructor(t){this.http=t}getDebugLevelData(){let i=p.I8.instanceUrl+"/services/data/v49.0/tooling/query/?q="+encodeURIComponent("Select Id, DeveloperName, ApexCode, Language, ApexProfiling, Callout, Database, MasterLabel, System, Validation, Visualforce, Workflow from DebugLevel ");return this.http.get(i)}updateTraceConfigInOrg(t,i){let s=JSON.stringify({DebugLevelId:i.Id});return this.http.patch(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/TraceFlag/"+t,s)}updateDebugLevel(t,i){return this.http.patch(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/DebugLevel/"+i,t)}deleteDebuglevel(t){return this.http.delete(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/DebugLevel/"+t)}createDebugLevel(t){return this.http.post(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/DebugLevel/",t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ce=g(105);function Lt(n,l){1&n&&e._UZ(0,"kendo-grid-column",9),2&n&&e.Q6J("field",l.$implicit)}function Ot(n,l){1&n&&e.GkF(0)}const It=function(n){return{$implicit:n}};function Rt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",10),e.TgZ(1,"div",11),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().loglevels.actions.delete(s)}),e._UZ(2,"i",12),e.qZA(),e.YNc(3,Ot,1,0,"ng-container",13),e.qZA()}if(2&n){const t=l.$implicit;e.oxw();const i=e.MAs(9);e.xp6(3),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,It,t))}}function Nt(n,l){1&n&&e.GkF(0)}function Ft(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().loglevels.actions.edit(o)}),e._UZ(1,"i",28),e.qZA()}}function Ut(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).loglevels.actions.new()}),e._UZ(1,"i",30),e.qZA()}}function zt(n,l){if(1&n&&(e.TgZ(0,"option",39),e._uU(1),e.qZA()),2&n){const t=l.$implicit,i=e.oxw().$implicit;e.Q6J("ngValue",t)("selected",t==i.value),e.xp6(1),e.hij(" ",t," ")}}function Bt(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",34),e.TgZ(2,"div",35),e.TgZ(3,"label",36),e._uU(4),e.qZA(),e.TgZ(5,"select",37),e.YNc(6,zt,2,3,"option",38),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){const t=l.$implicit,i=e.oxw(3);e.xp6(4),e.Oqu(t.key),e.xp6(1),e.Q6J("formControl",t.value),e.xp6(1),e.Q6J("ngForOf",i.loglevels.editor.options)}}function Vt(n,l){if(1&n&&(e.TgZ(0,"form",31),e.TgZ(1,"div",32),e.YNc(2,Bt,7,3,"ng-container",33),e.ALo(3,"keyvalue"),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("formGroup",t.loglevels.editor.form),e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,2,t.loglevels.editor.form.controls))}}function qt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-modal"),e.YNc(1,Ft,2,0,"button",14),e.YNc(2,Ut,2,0,"button",15),e.TgZ(3,"span",16),e._uU(4," Debug Level "),e.qZA(),e.TgZ(5,"div",17),e.TgZ(6,"div",18),e.TgZ(7,"label",19),e._uU(8,"Name"),e.qZA(),e.TgZ(9,"input",20),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().loglevels.editor.specialfields.Name=o}),e.qZA(),e.qZA(),e.YNc(10,Vt,4,4,"form",21),e.qZA(),e.TgZ(11,"div",22),e.TgZ(12,"button",23),e._UZ(13,"i",24),e.qZA(),e.TgZ(14,"button",25),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().loglevels.editor.actions.save(!!s)}),e._UZ(15,"i",26),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t),e.xp6(1),e.Q6J("ngIf",!t),e.xp6(7),e.Q6J("disabled",t)("ngModel",i.loglevels.editor.specialfields.Name),e.xp6(1),e.Q6J("ngIf",i.loglevels.editor.form)}}let Jt=(()=>{class n{constructor(t,i){this.debuglevelservice=t,this.formBuilder=i,this.state={filter:{logic:"and",filters:[]}},this.loglevels={data:{keys:["DebugLevel","Type"],values:[],raw:[],parse:o=>o.map(s=>({raw:s,DebugLevel:s.DeveloperName,Type:s.attributes.type})),updatedata:o=>{this.loglevels.data.raw=o,this.loglevels.data.values=this.loglevels.data.parse(o)}},actions:{new:()=>{this.loglevels.editor.form=this.formBuilder.group(p.gT.debuglogs.manageDebugLevel.editor.newdebugleveltemplate),this.loglevels.editor.specialfields.Name=""},edit:o=>{const s=o.raw,r=p.gT.debuglogs.manageDebugLevel.editor.keystoexclude,a=Object.keys(s).filter(d=>!r.includes(d)),c={};a.map(d=>c[d]=s[d]),this.loglevels.editor.form=this.formBuilder.group(c),this.loglevels.editor.specialfields.Name=s.DeveloperName,this.loglevels.editor.specialfields.Id=s.Id},delete:o=>{this.debuglevelservice.deleteDebuglevel(o.raw.Id).subscribe(()=>{this.loglevels.actions.refresh(""),v.y.maketoast({template:"success",body:`Deleted ${o.DebugLevel}`})})},refresh:o=>{this.debuglevelservice.getDebugLevelData().subscribe(s=>{"true"==o&&v.y.maketoast({template:"success",body:"Debug Levels Fetched"}),this.loglevels.data.updatedata(s.records||[])})}},editor:{open:!0,form:null,specialfields:{Name:"",Id:""},options:p.gT.debuglogs.manageDebugLevel.editor.options,actions:{toggle:()=>this.loglevels.editor.open=!this.loglevels.editor.open,save:o=>{const s=this.loglevels.editor.form.value,r=this.loglevels.editor.specialfields.Id;r&&o?this.debuglevelservice.updateDebugLevel(s,r).subscribe(()=>{v.y.maketoast({template:"success",body:"Debug Level Updated"}),this.loglevels.actions.refresh(""),this.loglevels.editor.specialfields.Id=null}):(s.Language="en_US",s.MasterLabel=s.DeveloperName=this.loglevels.editor.specialfields.Name,this.debuglevelservice.createDebugLevel(s).subscribe(()=>{v.y.maketoast({template:"success",body:"Debug Level Created Successfully"}),this.loglevels.actions.refresh("")})),this.loglevels.editor.specialfields.Name=null}}}}}ngOnInit(){this.loglevels.actions.refresh("")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ae),e.Y36(f.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-debug-levels"]],decls:10,vars:6,consts:[["sortable","true",1,"text-small","h-100-40",2,"background-color","inherit !important",3,"kendoGridBinding","scrollable","filter","filterable"],[3,"field",4,"ngFor","ngForOf"],["field","Actions"],["kendoGridCellTemplate",""],[1,"d-flex","p-1"],[4,"ngTemplateOutlet"],["title","Refresh","id","refreshdebugbtn",1,"btn","btn-light","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise"],["editor",""],[3,"field"],[1,"d-flex","justify-content-center"],["title","Delete","id","deletelvlbtnx",1,"btn","btn-danger","btn-sm","me-1",3,"click"],[1,"bi","bi-trash"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["title","Edit","id","editdebugbtnx","class","btn btn-light btn-sm me-1",3,"click",4,"ngIf"],["title","Create new","id","newdebugbtn","class","btn btn-light btn-sm me-1",3,"click",4,"ngIf"],["modal-title",""],["modal-body","",1,"mb-4","mx-2"],[1,"form-group"],[1,"fw-bold"],["type","text",1,"form-control",3,"disabled","ngModel","ngModelChange"],["class","container",3,"formGroup",4,"ngIf"],["modal-footer","",1,"d-flex","justify-content-center"],["id","fademe",1,"btn","btn-sm","me-1","btn-danger"],[1,"bi","bi-x-lg","pe-none"],["id","fademe",1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","pe-none"],["title","Edit","id","editdebugbtnx",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-pencil"],["title","Create new","id","newdebugbtn",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"bi","bi-plus-circle"],[1,"container",3,"formGroup"],[1,"row","m-2"],[4,"ngFor","ngForOf"],[1,"col-md-4","my-2"],[1,"mb-6","p-1","rounded"],["for","control.kay",1,"fw-bold"],[1,"form-select",3,"formControl"],["class","btn-secondary",3,"ngValue","selected",4,"ngFor","ngForOf"],[1,"btn-secondary",3,"ngValue","selected"]],template:function(t,i){if(1&t&&(e.TgZ(0,"kendo-grid",0),e.YNc(1,Lt,1,1,"kendo-grid-column",1),e.TgZ(2,"kendo-grid-column",2),e.YNc(3,Rt,4,4,"ng-template",3),e.qZA(),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,Nt,1,0,"ng-container",5),e.TgZ(6,"button",6),e.NdJ("click",function(){return i.loglevels.actions.refresh("true")}),e._UZ(7,"i",7),e.qZA(),e.qZA(),e.YNc(8,qt,16,5,"ng-template",null,8,e.W1O)),2&t){const o=e.MAs(9);e.Q6J("kendoGridBinding",i.loglevels.data.values)("scrollable",!0)("filter",i.state.filter)("filterable",!0),e.xp6(1),e.Q6J("ngForOf",i.loglevels.data.keys),e.xp6(4),e.Q6J("ngTemplateOutlet",o)}},directives:[m.MwP,m.HWw,h.sg,m.bg4,m.Ztq,h.tP,ce.z,h.O5,f.Fj,f.JJ,f.On,f._Y,f.JL,f.sg,f.EJ,f.oH,f.YN,f.Kr],pipes:[h.Nd],styles:[""]}),n})();function Pt(n,l){if(1&n&&(e.TgZ(0,"div",4),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.Q6J("routerLink",t.url),e.xp6(1),e.hij(" ",t.title," ")}}let Yt=(()=>{class n{constructor(){this.routes=p.gT.debuglogs.routes}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-debuglogs"]],decls:5,vars:1,consts:[[1,"tabbed-panel"],[1,"body"],["id","navbar",1,"nav-container"],["class","","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"",3,"routerLink"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._UZ(2,"router-outlet"),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Pt,2,2,"div",3),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.routes))},directives:[T.lC,h.sg,T.Od,T.rH],styles:[""]}),n})();var jt=g(4004);let Gt=(()=>{class n{constructor(t){this.http=t}getOptionsData(){return(0,q.D)(["Select Id, Name from User","Select NamespacePrefix, Name, Id From ApexClass","Select NamespacePrefix, Name, Id From ApexTrigger"].map(s=>this.executequery(s).pipe((0,jt.U)(r=>({records:r.records,entityTypeName:r.entityTypeName})))))}getTraceFlag(){return this.executequery("Select Id, LogType, DebugLevelId, DebugLevel.DeveloperName,TracedEntityId, TracedEntity.Name, ExpirationDate \n    from TraceFlag order by ExpirationDate DESC ")}updateDebugLevel(t,i){return this.http.patch(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/TraceFlag/"+t,{DebugLevelId:i})}saveTraceConfig(t,i,o){let s=new Date,r=new Date;r.setDate(r.getDate()+1);const a={TracedEntityId:t,ExpirationDate:r.toISOString(),DebugLevelId:i,LogType:o,StartDate:s.toISOString()};return this.http.post(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/TraceFlag/",a)}deleteTraceConfig(t){return this.http.delete(p.I8.instanceUrl+"/services/data/v49.0/tooling/sobjects/TraceFlag/"+t)}executequery(t){return this.http.get(p.I8.instanceUrl+"/services/data/v49.0/tooling/query/?q="+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(y.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Qt=g(4518);function Ht(n,l){if(1&n&&e._UZ(0,"kendo-grid-column",8),2&n){const t=l.$implicit,i=e.oxw();e.Q6J("field",t)("filter",i.traceflags.data.filters[t])}}function $t(n,l){1&n&&e.GkF(0)}const Wt=function(n){return{$implicit:n}};function Xt(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"div",10),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().traceflags.actions.delete(s)}),e._UZ(2,"i",11),e.qZA(),e.ynx(3),e.YNc(4,$t,1,0,"ng-container",12),e.BQk(),e.qZA()}if(2&n){const t=l.$implicit;e.oxw();const i=e.MAs(9);e.xp6(4),e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.VKq(2,Wt,t))}}function Kt(n,l){1&n&&e.GkF(0)}function ei(n,l){1&n&&(e.TgZ(0,"button",25),e._UZ(1,"i",26),e.qZA())}function ti(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().traceflags.editor.actions.preloaddata(o)}),e._UZ(1,"i"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("title",t.Expired?"renew":"edit"),e.xp6(1),e.Gre("bi ",t.Expired?"bi-arrow-repeat":"bi-pencil","")}}function ii(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"v-searchselect",31),e.NdJ("valueChange",function(o){e.CHM(t);const s=e.oxw(2).$implicit;return s.selection[s.selection.TraceConfig]=o}),e.qZA()}if(2&n){const t=e.oxw(2).$implicit;e.Q6J("all",t.options[t.selection.TraceConfig])("value",t.selection[t.selection.TraceConfig])}}function ni(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30),e._uU(2,"Trace Config"),e.qZA(),e.TgZ(3,"v-searchselect",32),e.NdJ("valueChange",function(o){return e.CHM(t),e.oxw().$implicit.selection.TraceConfig=o})("valueChange",function(){return e.CHM(t),e.oxw(3).traceflags.editor.needRefresh.traceconfirefresh()}),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA(),e.YNc(6,ii,1,2,"v-searchselect",33),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(3),e.Q6J("all",t.options.TraceConfig)("value",t.selection.TraceConfig),e.xp6(2),e.hij(" ",t.selection.TraceConfig," "),e.xp6(1),e.Q6J("ngIf",i.traceflags.editor.needRefresh.traceconfigready&&t.options[t.selection.TraceConfig])}}function oi(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",28),e.YNc(1,ni,7,4,"ng-container",29),e.TgZ(2,"div",30),e._uU(3,"Debug Level"),e.qZA(),e.TgZ(4,"v-searchselect",31),e.NdJ("valueChange",function(o){return e.CHM(t).$implicit.selection.DebugLevel=o}),e.qZA(),e.qZA()}if(2&n){const t=l.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i&&i.Expired||!i),e.xp6(3),e.Q6J("all",t.options.DebugLevel)("value",t.selection.DebugLevel)}}function si(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"app-modal",13),e.NdJ("state",function(o){return e.CHM(t),e.oxw().traceflags.editor.statechange(o)}),e.YNc(1,ei,2,0,"button",14),e.YNc(2,ti,2,4,"ng-template",null,15,e.W1O),e.TgZ(4,"span",16),e._UZ(5,"i",17),e.qZA(),e.TgZ(6,"div",18),e.YNc(7,oi,5,3,"div",19),e.qZA(),e.TgZ(8,"div",20),e.TgZ(9,"button",21),e._UZ(10,"i",22),e.qZA(),e.TgZ(11,"button",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().traceflags.editor.actions.save(s)}),e._UZ(12,"i",24),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=l.$implicit,i=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",!t)("ngIfElse",i),e.xp6(6),e.Q6J("ngIf",o.traceflags.editor.open&&o.traceflags.editor.formdata)}}let li=(()=>{class n{constructor(t,i){this.traceflagservice=t,this.debuglevelservice=i,this.state={filter:{logic:"and",filters:[]}},this.traceflags={grid:{rowclass:({dataItem:o})=>o.Expired?"shadow-danger":""},data:{keys:["DebugLevel","ExpirationDate","LogType","User"],filters:{ExpirationDate:"date"},values:[],raw:[],parse:o=>o.map(s=>({raw:s,DebugLevel:s.DebugLevel.DeveloperName,ExpirationDate:new Date(s.ExpirationDate),Expired:new Date>new Date(s.ExpirationDate),LogType:s.LogType,User:s.TracedEntity.Name})),updatedata:o=>{this.traceflags.data.raw=o,this.traceflags.data.values=this.traceflags.data.parse(o)}},actions:{add:(o,s,r)=>{const a=Object.values(r)[0];this.traceflagservice.saveTraceConfig(a,o,s).subscribe(c=>{this.traceflags.actions.refresh(""),v.y.maketoast({template:"success",body:"Created Successfully"})})},edit:(o,s)=>{this.traceflagservice.updateDebugLevel(o,s).subscribe(()=>{this.traceflags.actions.refresh(""),v.y.maketoast({template:"success",body:"Updated Successfully"})})},delete:o=>{this.traceflagservice.deleteTraceConfig(o.raw.Id).subscribe(()=>{this.traceflags.actions.refresh(""),v.y.maketoast({template:"success",body:"Deleted Successfully"})})},refresh:o=>{this.traceflagservice.getTraceFlag().subscribe(s=>{"true"==o&&v.y.maketoast({template:"success",body:"Trace Flags Fetched"}),this.traceflags.data.updatedata(s.records||[])})}},editor:{open:!1,needRefresh:{traceconfigready:!1,traceconfirefresh:()=>{this.traceflags.editor.needRefresh.traceconfigready=!1,setTimeout(()=>{this.traceflags.editor.needRefresh.traceconfigready=!0},0)}},statechange:o=>{o||(this.traceflags.editor.formdata.selection={TraceConfig:"",DebugLevel:{},User:{},ApexClass:{},ApexTrigger:{}}),this.traceflags.editor.open=o},formdata:{mapper:{TraceConfigToLogType:{User:"DEVELOPER_LOG",ApexClass:"CLASS_TRACING",ApexTrigger:"CLASS_TRACING"}},options:{TraceConfig:["User","ApexClass","ApexTrigger"],DebugLevel:{},User:{},ApexClass:{},ApexTrigger:{}},selection:{TraceConfig:"",DebugLevel:{},User:{},ApexClass:{},ApexTrigger:{}}},actions:{preloaddata:o=>{if(o){const s=this.traceflags.editor.formdata;s.selection.TraceConfig=s.options.TraceConfig.filter(r=>o[r])[0],s.selection.DebugLevel={[o.DebugLevel]:s.options.DebugLevel[o.DebugLevel]},s.selection[s.selection.TraceConfig]={[o[s.selection.TraceConfig]]:s.options[s.selection.TraceConfig][o[s.selection.TraceConfig]]},this.traceflags.editor.needRefresh.traceconfirefresh()}},save:o=>{const s=this.traceflags.editor.formdata.selection,r=Object.values(s.DebugLevel)[0];o?o.Expired?this.traceflags.actions.add(r,this.traceflags.editor.formdata.mapper.TraceConfigToLogType[s.TraceConfig],s[s.TraceConfig]):this.traceflags.actions.edit(o.raw.Id,r):this.traceflags.actions.add(r,this.traceflags.editor.formdata.mapper.TraceConfigToLogType[s.TraceConfig],s[s.TraceConfig])}}}}}ngOnInit(){this.traceflagservice.getOptionsData().subscribe(t=>{t.map(i=>{i.records.map(o=>{this.traceflags.editor.formdata.options[i.entityTypeName][o.NamespacePrefix||""+o.Name]=o.Id})})}),this.debuglevelservice.getDebugLevelData().subscribe(t=>{t.records.map(i=>{this.traceflags.editor.formdata.options.DebugLevel[i.DeveloperName]=i.Id})}),this.traceflags.actions.refresh("")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Gt),e.Y36(ae))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-manage-trace-flag"]],decls:10,vars:6,consts:[["sortable","true","filterable","menu",1,"text-small","h-100-40",2,"background-color","inherit !important",3,"kendoGridBinding","scrollable","filter","rowClass"],[3,"field","filter",4,"ngFor","ngForOf"],["kendoGridCellTemplate",""],[1,"d-flex","p-1"],[4,"ngTemplateOutlet"],["id","refreshtracebtn",1,"btn","btn-light","btn-sm",3,"click"],[1,"bi","bi-arrow-clockwise"],["editor",""],[3,"field","filter"],[1,"d-flex","justify-content-center"],["title","Delete","id","deleteflagbtnx",1,"btn","btn-danger","btn-sm","me-1",3,"click"],[1,"bi","bi-trash"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"state"],["id","newflagbtn","class","btn btn-light btn-sm me-1",4,"ngIf","ngIfElse"],["editbtn",""],["modal-title",""],[1,"bi","bi-pencil"],["modal-body","",1,"mb-4","mx-2"],["class","w-100 grid justify-content-center",4,"ngIf"],["modal-footer","",1,"d-flex","justify-content-center"],["id","fademe",1,"btn","btn-sm","me-1","btn-danger"],[1,"bi","bi-x-lg","pe-none"],["id","fademe",1,"btn","btn-sm","btn-success",3,"click"],[1,"bi","bi-check-lg","pe-none"],["id","newflagbtn",1,"btn","btn-light","btn-sm","me-1"],[1,"bi","bi-plus-circle"],["id","Editflagbtnx",1,"btn","btn-light","btn-sm","me-1",3,"title","click"],[1,"w-100","grid","justify-content-center"],[4,"ngIf"],[1,"fw-bold","fs-small"],[3,"all","value","valueChange"],["type","plain",3,"all","value","valueChange"],[3,"all","value","valueChange",4,"ngIf"]],template:function(t,i){if(1&t&&(e.TgZ(0,"kendo-grid",0),e.YNc(1,Ht,1,2,"kendo-grid-column",1),e.TgZ(2,"kendo-grid-column"),e.YNc(3,Xt,5,4,"ng-template",2),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.YNc(5,Kt,1,0,"ng-container",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.traceflags.actions.refresh("true")}),e._UZ(7,"i",6),e.qZA(),e.qZA(),e.YNc(8,si,13,3,"ng-template",null,7,e.W1O)),2&t){const o=e.MAs(9);e.Q6J("kendoGridBinding",i.traceflags.data.values)("scrollable",!0)("filter",i.state.filter)("rowClass",i.traceflags.grid.rowclass),e.xp6(1),e.Q6J("ngForOf",i.traceflags.data.keys),e.xp6(4),e.Q6J("ngTemplateOutlet",o)}},directives:[m.MwP,m.HWw,h.sg,m.bg4,m.Ztq,h.tP,ce.z,h.O5,Qt._],styles:[""]}),n})();var ri=g(623);const ai=[{path:"",redirectTo:"menu",pathMatch:"full"},{path:"",component:Yt,children:[{path:"menu",component:(()=>{class n{constructor(){this.routes=p.gT.debuglogs.routes.slice(1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-menu"]],decls:1,vars:1,consts:[[3,"list"]],template:function(t,i){1&t&&e._UZ(0,"v-search-menu",0),2&t&&e.Q6J("list",i.routes)},directives:[ri.B],styles:[""]}),n})()},{path:"logs",component:At},{path:"manage-level",component:Jt},{path:"manage-trace",component:li},{path:"tail-logs",component:_t}]}];let ci=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[T.Bz.forChild(ai)],T.Bz]}),n})();var di=g(1371),gi=g(3985);let ui=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[m.dB7],imports:[[h.ez,m.zE6,ci,di.dZ,D.r84,gi.W,f.UX,f.u5,Ke,m.m81]]}),n})()}}]);