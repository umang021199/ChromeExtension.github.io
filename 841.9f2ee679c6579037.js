"use strict";(self.webpackChunksfsce=self.webpackChunksfsce||[]).push([[841],{3841:(P,b,a)=>{a.r(b),a.d(b,{ObjectLimitsModule:()=>Q});var u=a(9808),h=a(1533),_=a(2999),m=a(2897),f=a(4004),p=a(4999),t=a(5e3),j=a(520);let v=(()=>{class e{constructor(n){this.http=n}getObjectList(){return this.http.get(p.I8.instanceUrl+"/services/data/v53.0/sobjects")}getObjectLimits(n,i){let o=p.I8.instanceUrl+`/services/data/v53.0/tooling/query/?q=Select+DurableId, EntityDefinitionId, Label, Max, Remaining, Type from EntityLimit where EntityDefinitionId IN ('${n.join("','")}')`;return this.http.get(o).pipe((0,f.U)(s=>s.records.map(r=>{if(/^[a-zA-Z]/.test(r.EntityDefinitionId))r.SObject=r.EntityDefinitionId;else{let c=i.find(({Id:g})=>g===r.EntityDefinitionId);c&&(r.SObject=c.DeveloperName)}return r})))}getAllCustomObjects(){return this.http.get(p.I8.instanceUrl+"/services/data/v54.0/tooling/query/?q=Select Id, DeveloperName, NamespacePrefix, Description from CustomObject").pipe((0,f.U)(o=>o.records.map(s=>(s.Id=s.Id.substring(0,15),s))))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(j.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=a(9643),d=a(3075);function O(e,l){1&e&&t.GkF(0)}function Z(e,l){1&e&&t.GkF(0)}function T(e,l){1&e&&t.GkF(0)}function A(e,l){if(1&e&&(t.TgZ(0,"div",6),t.TgZ(1,"span",7),t._uU(2),t.qZA(),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.hij(" ",n.main.selectedobjects.length?" Limits for "+n.main.selectedobjects.length+" Object(s)":"No Object(s) to display Limits for.."," ")}}function L(e,l){if(1&e){const n=t.EpF();t.TgZ(0,"div",8),t.TgZ(1,"div",9),t.TgZ(2,"button",10),t._uU(3),t.qZA(),t.TgZ(4,"div",11),t.TgZ(5,"app-multiselect",12),t.NdJ("selectionChange",function(o){return t.CHM(n),t.oxw().main.selectedobjects=o}),t.qZA(),t.qZA(),t.TgZ(6,"button",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().main.onGetLimits()}),t._uU(7," Fetch "),t.qZA(),t.qZA(),t.TgZ(8,"div",14),t.TgZ(9,"div",15),t.TgZ(10,"div",16),t.TgZ(11,"span",17),t._uU(12,"Showing availablity"),t.qZA(),t.TgZ(13,"span"),t.TgZ(14,"select",18),t.NdJ("change",function(o){t.CHM(n);const s=t.MAs(27);return t.oxw().main.select(o.target,s.value)}),t.TgZ(15,"option",19),t._uU(16,"Upto"),t.qZA(),t.TgZ(17,"option",20),t._uU(18,"Above"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",21),t.TgZ(20,"span",22),t._uU(21,"1%"),t.qZA(),t.TgZ(22,"div",23),t.TgZ(23,"span",24),t._uU(24),t.qZA(),t.TgZ(25,"div"),t.TgZ(26,"input",25,26),t.NdJ("input",function(){t.CHM(n);const o=t.MAs(27);return t.oxw().main.onFilter(o.value)}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"span",22),t._uU(29,"100%"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const n=t.MAs(27),i=t.oxw();t.xp6(3),t.AsE(" Select Objects ",i.main.selectedobjects.length,"/ ",i.main.labels.length," "),t.xp6(2),t.Q6J("allunique",i.main.labels)("selection",i.main.selectedobjects),t.xp6(1),t.Q6J("disabled",0===i.main.selectedobjects.length),t.xp6(8),t.Q6J("value",i.main.showingResult),t.xp6(10),t.hij("",n.value,"%"),t.xp6(2),t.Q6J("value",i.main.filterPercentage)}}const y=function(e){return{"bg-danger":e}};function C(e,l){if(1&e&&(t.TgZ(0,"div",34),t.TgZ(1,"div",35),t._uU(2),t.qZA(),t.qZA()),2&e){const n=t.oxw().$implicit,i=t.oxw().$implicit;t.xp6(1),t.Akn("width:"+n[i]+"%"),t.Q6J("ngClass",t.VKq(4,y,n[i]<=70)),t.xp6(1),t.hij(" ",n[i],"% ")}}function w(e,l){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA(),t.YNc(2,C,3,6,"div",33)),2&e){const n=l.$implicit,i=t.oxw().$implicit;t.xp6(1),t.hij(" ",n[i+"_value"]," "),t.xp6(1),t.Q6J("ngIf",null!=n[i])}}function M(e,l){1&e&&(t.TgZ(0,"kendo-grid-column",31),t.YNc(1,w,3,2,"ng-template",32),t.qZA()),2&e&&t.Q6J("field",l.$implicit)}const S=function(){return{filter:!0}},N=function(){return{checkboxOnly:!0,mode:"multiple"}};function k(e,l){if(1&e&&(t.TgZ(0,"kendo-grid",28),t._UZ(1,"kendo-grid-column",29),t.YNc(2,M,2,1,"kendo-grid-column",30),t.qZA()),2&e){const n=t.oxw(2);t.Q6J("kendoGridBinding",n.main.gridView)("skip",0)("pageSize",30)("scrollable","virtual")("virtualColumns",!0)("rowHeight",34)("columnMenu",t.DdM(9,S))("selectable",t.DdM(10,N)),t.xp6(2),t.Q6J("ngForOf",n.main.gridColumns)}}function I(e,l){if(1&e&&t.YNc(0,k,3,11,"kendo-grid",27),2&e){const n=t.oxw();t.Q6J("ngIf",!n.main.hide)}}const R=[{path:"",component:(()=>{class e{constructor(n){this.Service=n,this.utility={roundOf:i=>Math.round(100*(i+Number.EPSILON))/100,changeToGridInput:i=>{i.push({});let o=[],s={},r=null;return i.forEach(c=>{if(c.SObject!=r){r=c.SObject;const g=JSON.parse(JSON.stringify(s));Object.keys(g).length&&o.push(g),s={SObject:c.SObject},c.Type&&(s[c.Type+"_value"]=`${c.Remaining}/${c.Max}`,s[c.Type]=this.utility.roundOf(c.Remaining/c.Max*100))}else s[c.Type+"_value"]=`${c.Remaining}/${c.Max}`,s[c.Type]=this.utility.roundOf(c.Remaining/c.Max*100)}),o},createObjectApiNameList:i=>i.map(o=>o.id),filterGood:i=>i.sobjects.filter(o=>o.layoutable&&o.triggerable),returnNameLabelPairArray:i=>{let o=[];return i.forEach(s=>{o.push({name:s.label,id:s.name})}),o}},this.main={gridView:[],gridInput:[],customObjects:[],objectList:[],labels:{},selectedobjects:[],namesToLabels:[],showingResult:"lte",filterPercentage:"100",gridColumns:["CustomFields","CustomRelationship","RollupSummary","ActiveValidationRules","ApprovalProcesses","ActiveRules","TotalRules","ActiveLookupFilters","VLookup","SharingRules","CbsSharingRules"],select:(i,o)=>{this.main.showingResult=i.value,this.main.onFilter(o)},init:()=>{this.Service.getAllCustomObjects().subscribe(i=>{this.main.customObjects=i}),this.Service.getObjectList().subscribe(i=>{i=this.utility.filterGood(i),this.main.labels=this.utility.returnNameLabelPairArray(i).sort((o,s)=>o.name.localeCompare(s.name))})},onGetLimits:()=>{this.main.filterPercentage="100",this.main.showingResult="lte",this.main.objectList=this.utility.createObjectApiNameList(this.main.selectedobjects),this.Service.getObjectLimits(this.main.objectList,this.main.customObjects).subscribe(i=>{this.main.gridView=this.main.gridInput=this.utility.changeToGridInput(i)})},onFilter:i=>{const o=Number(i);this.main.filterPercentage=i,this.main.gridView=(0,_.N4)(this.main.gridInput,{filter:{logic:"or",filters:this.main.gridColumns.map(s=>({field:s,operator:this.main.showingResult,value:o}))}}).data,this.dataBinding.skip=0}}}ngOnInit(){this.main.init()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-object-limits"]],viewQuery:function(n,i){if(1&n&&t.Gf(m.HWw,5),2&n){let o;t.iGM(o=t.CRH())&&(i.dataBinding=o.first)}},decls:11,vars:3,consts:[[1,"tabbed-panel"],[1,"body"],[4,"ngTemplateOutlet"],["localfooter",""],["tableheader",""],["grid",""],[1,"footer-container"],[1,"text-center"],[1,"d-flex","p-1","mt-1","mb-2","justify-content-between",2,"height","2.5rem"],[1,"ms-2"],["data-bs-toggle","dropdown","id","selectobjectsbtn",1,"btn","btn-sm","btn-light","dropdown-toggle","shadow-hide"],[1,"dropdown-menu","w-100","bg-transparent","px-1","py-0","border-0"],[1,"theme-light",3,"allunique","selection","selectionChange"],[1,"btn","btn-light","btn-sm","ms-1","shadow-hide",3,"disabled","click"],[1,"me-2"],[1,"btn-group","rounded","row"],["for","customRange",1,"col-auto","p-1"],[1,"p-1","fw-normal",2,"font-size","0.95rem"],[1,"form-control","form-control-sm","d-inline","w-max-content","p-1",3,"value","change"],["value","lte",1,"btn-dark"],["value","gte",1,"btn-dark"],[1,"col-auto","p-1","d-flex"],[1,"p-1",2,"font-size","0.8rem"],[1,"d-flex","flex-column","justify-content-center","align-items-center"],[1,"bg-success","px-1","text-white","rounded-pill",2,"font-size","0.59rem","text-align","center"],["type","range","min","1","max","100","id","customRange",1,"slider",3,"value","input"],["limitFilter",""],["sortable","true","class","text-small h-100-40","style","background-color: inherit !important",3,"kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","columnMenu","selectable",4,"ngIf"],["sortable","true",1,"text-small","h-100-40",2,"background-color","inherit !important",3,"kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","columnMenu","selectable"],["field","SObject","width","175"],["width","175","filter","numeric",3,"field",4,"ngFor","ngForOf"],["width","175","filter","numeric",3,"field"],["kendoGridCellTemplate",""],["class","progress",4,"ngIf"],[1,"progress"],["role","progressbar","aria-label","Example with label","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-success",3,"ngClass"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,O,1,0,"ng-container",2),t.YNc(3,Z,1,0,"ng-container",2),t.qZA(),t.YNc(4,T,1,0,"ng-container",2),t.qZA(),t.YNc(5,A,3,1,"ng-template",null,3,t.W1O),t.YNc(7,L,30,8,"ng-template",null,4,t.W1O),t.YNc(9,I,1,1,"ng-template",null,5,t.W1O)),2&n){const o=t.MAs(6),s=t.MAs(8),r=t.MAs(10);t.xp6(2),t.Q6J("ngTemplateOutlet",s),t.xp6(1),t.Q6J("ngTemplateOutlet",r),t.xp6(1),t.Q6J("ngTemplateOutlet",o)}},directives:[u.tP,x.z,d.YN,d.Kr,u.O5,m.MwP,m.HWw,m.bg4,u.sg,m.Ztq,u.mk],styles:[".slidecontainer[_ngcontent-%COMP%]{width:100%}.slider[_ngcontent-%COMP%]{width:100%;height:5.8px}"]}),e})()}];let q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(R)],h.Bz]}),e})();var U=a(321),J=a(9446),F=a(1375),G=a(3985);let Q=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,q,U.q2,d.u5,J.rw,d.UX,F.cP,G.W,m.zE6]]}),e})()}}]);