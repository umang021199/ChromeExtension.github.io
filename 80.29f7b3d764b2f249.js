"use strict";(self.webpackChunksfsce=self.webpackChunksfsce||[]).push([[80],{2080:(nt,I,y)=>{y.r(I),y.d(I,{SchemaExplorerModule:()=>rt});var w=y(9808),k=y(3075),A=y(1533),M=y(2564),C=y(2897),Q=y(520),D=y(9646),v=y(4999),E=y(7555),e=y(5e3);let L=(()=>{class n{constructor(t){this.http=t}getsobjects(){const t=v.I8.instanceUrl+`/services/data/v${E.X.data.salesforce.api.version}/sobjects`;let i=new Q.WM;return i=i.set("cache","SObjects"),this.http.get(t,{headers:i})}getDatafromBox(t){return(0,D.of)(t)}patchsObjects(t,i){return this.http.patch(t,i)}executequery(t){return this.http.get(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Q.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=y(2463),x=y(4908),Y=y(8843),Z=y(1371);const B=["childrentable"];function P(n,c){1&n&&e.GkF(0)}function H(n,c){1&n&&e.GkF(0)}function V(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().nav.gototab("resultgrid")}),e._uU(1," Show Records "),e.qZA()}}function $(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().handleClear()}),e._uU(1," Clear "),e.qZA()}}function G(n,c){1&n&&(e.TgZ(0,"button",37),e._UZ(1,"span",38),e._uU(2," query has been updated. Execute new query to update the table "),e.qZA()),2&n&&e.Q6J("disabled",!0)}function z(n,c){1&n&&(e.TgZ(0,"button",39),e._UZ(1,"span",40),e._uU(2," Loading... "),e.qZA())}function K(n,c){1&n&&e.GkF(0)}function W(n,c){1&n&&e.GkF(0)}function X(n,c){1&n&&e.GkF(0)}function ee(n,c){if(1&n&&(e.TgZ(0,"div",null,41),e.YNc(2,X,1,0,"ng-container",14),e.qZA()),2&n){e.oxw();const t=e.MAs(52);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}function te(n,c){1&n&&e.GkF(0)}function ie(n,c){1&n&&e.GkF(0)}function re(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).history.select(r)}),e._UZ(1,"span",44),e._uU(2),e.qZA()}if(2&n){const t=c.$implicit;e.xp6(2),e.hij(" \xa0",t," ")}}function ne(n,c){if(1&n&&e.YNc(0,re,3,1,"div",42),2&n){const t=e.oxw();e.Q6J("ngForOf",t.history.historylist)}}function se(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"input",50),e.NdJ("change",function(l){e.CHM(t);const r=e.oxw().$implicit;return e.oxw(2).selectedCheckBox(l.target.checked,r)}),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("value",t)("checked",t.isChecked)}}function le(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.text,"\xa0")}}function ae(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"input",51,52),e.NdJ("keyup",function(){e.CHM(t);const l=e.MAs(1),r=e.oxw(),s=r.$implicit,a=r.index;return e.oxw(2).onSearchField(s,l.value,a)}),e.qZA()}}function oe(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"span"),e.TgZ(1,"img",53),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(),r=l.$implicit,s=l.index;return e.oxw(2).searchField(r,s)}),e.qZA(),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("src",t.icon,e.LSH)("alt",t.type)("title",t.type)}}function de(n,c){if(1&n&&(e.TgZ(0,"label",47),e.YNc(1,se,1,2,"input",48),e.YNc(2,le,2,1,"span",23),e.qZA(),e.YNc(3,ae,2,0,"input",49),e.YNc(4,oe,2,3,"span",23)),2&n){const t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.isField),e.xp6(1),e.Q6J("ngIf",t.text),e.xp6(1),e.Q6J("ngIf",t.isInput),e.xp6(1),e.Q6J("ngIf",t.icon)}}const ce=function(){return{overflow:"auto","font-size":"small"}};function he(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"kendo-treeview",45),e.NdJ("expandedKeysChange",function(l){return e.CHM(t),e.oxw().expandedKeys=l})("expand",function(l){return e.CHM(t),e.oxw().handleExpand(l)})("collapse",function(l){return e.CHM(t),e.oxw().handleCollapse(l)}),e.YNc(1,de,5,4,"ng-template",46),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngStyle",e.DdM(8,ce))("nodes",t.data)("children",t.fetchChildren)("hasChildren",t.hasChildren)("isExpanded",t.isExpanded)("expandBy",t.key)("expandedKeys",t.expandedKeys),e.xp6(1),e.Q6J("ngForOf",t.items)}}function ue(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"textarea",54),e.NdJ("ngModelChange",function(l){return e.CHM(t),e.oxw().query=l}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.query)}}function pe(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",70),e.TgZ(2,"button",71),e._uU(3," Export Excel "),e._UZ(4,"i",72),e.qZA(),e.qZA(),e.TgZ(5,"div",66),e.TgZ(6,"button",73),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).querytable.refresh()}),e._UZ(7,"i",74),e.TgZ(8,"span",75),e._uU(9," Refresh "),e.qZA(),e.qZA(),e.qZA(),e.BQk()}}function me(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",76),e.NdJ("click",function(){return e.CHM(t),e.oxw(4).querytable.editor.saveChanges()}),e._UZ(2,"i",77),e.TgZ(3,"span",75),e._uU(4," Save "),e.qZA(),e.qZA(),e.TgZ(5,"button",78),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(4);return l.querytable.editor.cancelChanges(l.grid)}),e._UZ(6,"i",79),e.TgZ(7,"span",75),e._uU(8," Cancel"),e.qZA(),e.qZA(),e.BQk()}}function ge(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",5),e.TgZ(1,"div",65),e.YNc(2,pe,10,0,"ng-container",23),e.TgZ(3,"div",66),e.TgZ(4,"button",67),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).querytable.editor.toggle()}),e.TgZ(5,"label",68),e._UZ(6,"i",69),e._uU(7),e._UZ(8,"i"),e.qZA(),e.qZA(),e.YNc(9,me,9,0,"ng-container",23),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",!t.querytable.editor.active),e.xp6(2),e.Gre("btn btn-sm ",t.querytable.editor.active?"btn-success":"btn-light",""),e.xp6(3),e.hij(" ",t.querytable.editor.active?"Editing":"Edit"," "),e.xp6(1),e.Gre("bi ",t.querytable.editor.active?"bi-toggle2-on":"bi-toggle2-off",""),e.xp6(1),e.Q6J("ngIf",t.querytable.editor.celleditbackup[0])}}function fe(n,c){1&n&&(e.TgZ(0,"div",81),e.TgZ(1,"div",82),e._uU(2," Full Edit "),e.qZA(),e.TgZ(3,"div",83),e._uU(4," Quick Edit "),e.qZA(),e.qZA())}function _e(n,c){1&n&&(e.TgZ(0,"div",81),e.TgZ(1,"div",84),e._UZ(2,"i",85),e._uU(3," Keep "),e.qZA(),e.TgZ(4,"div",86),e._UZ(5,"i",79),e._uU(6," Discard "),e.qZA(),e.qZA())}function be(n,c){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,fe,5,0,"div",80),e.YNc(2,_e,7,0,"div",80),e.qZA()),2&n){const t=c.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!i.querytable.editor.args),e.xp6(1),e.Q6J("ngIf",t.Id&&t.Id==(null==i.querytable.editor.args||null==i.querytable.editor.args.dataitem?null:i.querytable.editor.args.dataitem.Id))}}const ye=function(n,c){return{edited:n,"cursor-pointer text-primary":c}};function xe(n,c){if(1&n&&(e.TgZ(0,"div",89),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit,l=e.oxw(3);e.Q6J("ngClass",e.WLB(2,ye,"childobject"!=i.type&&l.querytable.initialgriddata[t.Id][i.basename]!=t[i.basename],"id"==i.type||"reference"==i.type||"childobject"==i.type)),e.xp6(1),e.hij(" ","childobject"!=i.type?t[i.basename]:null==t[i.basename]?null:t[i.basename].text," ")}}function qe(n,c){if(1&n&&e.YNc(0,xe,2,5,"div",88),2&n){const t=c.$implicit,i=e.oxw().$implicit;e.Q6J("ngIf",null!=t[i.basename])}}const ve=function(){return{"background-color":"#00000015"}},Ce=function(){return{}};function Ne(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"kendo-grid-column",87),e.YNc(2,qe,1,1,"ng-template",62),e.qZA(),e.BQk()),2&n){const t=c.$implicit,i=e.oxw(3);e.xp6(1),e.Akn(t.updateable?e.DdM(10,Ce):e.DdM(9,ve)),e.s9C("filter",t.basetype),e.s9C("format",i.basetypeformat[t.type]),e.s9C("editor",t.basetype),e.Q6J("field",t.basename)("hidden",t.hidden)("title",t.name)("width",260)}}const Te=function(n){return{"font-size":"small","border-color":"#e9e9e9",display:n}};function ke(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"kendo-grid",58,59),e.NdJ("pageChange",function(l){return e.CHM(t),e.oxw(2).querytable.events.virtualPageChange(l)})("cellClick",function(l){return e.CHM(t),e.oxw(2).querytable.events.cellClickHandler(l)}),e.YNc(2,ge,10,9,"ng-template",60),e.TgZ(3,"kendo-grid-command-column",61),e.YNc(4,be,3,2,"ng-template",62),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"json"),e.qZA(),e.YNc(8,Ne,3,11,"ng-container",63),e._UZ(9,"kendo-grid-excel",64),e.ALo(10,"date"),e.qZA()}if(2&n){const t=e.oxw(2),i=e.MAs(1);e.Q6J("ngStyle",e.VKq(20,Te,t.querytable.childrengrid.show?"none":"flex"))("kendoGridBinding",t.gridData)("skip",0)("pageSize",30)("scrollable","virtual")("virtualColumns",!0)("rowHeight",84)("height",i.offsetHeight-72)("filter",t.filter)("filterable","menu"),e.xp6(3),e.Q6J("locked",!0)("hidden",!t.querytable.editor.active),e.xp6(3),e.Oqu(e.lcZ(7,15,t.colinfo)),e.xp6(2),e.Q6J("ngForOf",t.colinfo),e.xp6(1),e.MGl("fileName","Records ",e.xi3(10,17,t.utility.datetime,"short"),".xlsx")}}function we(n,c){1&n&&(e.TgZ(0,"div",90),e.TgZ(1,"div",3),e.TgZ(2,"div",91),e._UZ(3,"span",40),e._uU(4," Loading... "),e.qZA(),e.qZA(),e.qZA())}function Ze(n,c){if(1&n&&(e.TgZ(0,"div",55),e.YNc(1,ke,11,22,"kendo-grid",56),e.qZA(),e.YNc(2,we,5,0,"div",57)),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.querytable.loading),e.xp6(1),e.Q6J("ngIf",t.querytable.loading)}}function Se(n,c){1&n&&(e.ynx(0),e.TgZ(1,"div",101),e.TgZ(2,"button",71),e._uU(3," Export Excel "),e._UZ(4,"i",72),e.qZA(),e.qZA(),e.BQk())}function Ee(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",97),e.TgZ(1,"div",70),e.TgZ(2,"button",98),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).querytable.childrengrid.close()}),e._UZ(3,"i",99),e.qZA(),e.TgZ(4,"div",100),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",65),e.YNc(7,Se,5,0,"ng-container",23),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(5),e.hij(" Child Relationship : ",t.querytable.childrengrid.name," "),e.xp6(2),e.Q6J("ngIf",!t.querytable.editor.active)}}const Oe=function(n){return{"btn btn-sm text-primary":n}};function Ie(n,c){if(1&n&&(e.TgZ(0,"div",89),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit,l=e.oxw(3);e.Q6J("ngClass",e.VKq(2,Oe,l.isId(l.data))),e.xp6(1),e.hij(" ",t[i]," ")}}function Ae(n,c){if(1&n&&e.YNc(0,Ie,2,4,"div",88),2&n){const t=c.$implicit,i=e.oxw().$implicit;e.Q6J("ngIf",null!=t[i])}}function Qe(n,c){if(1&n&&(e.TgZ(0,"kendo-grid-column",102),e.YNc(1,Ae,1,1,"ng-template",62),e.qZA()),2&n){const t=c.$implicit,i=c.index,l=e.oxw(3);e.Q6J("field",t)("title",l.querytable.childrengrid.columns.real[i])("width",260)}}const De=function(){return{"font-size":"small","border-color":"#e9e9e9"}};function Fe(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"kendo-grid",94,95),e.NdJ("cellClick",function(l){return e.CHM(t),e.oxw(2).querytable.childrengrid.events.cellClickHandler(l)}),e.YNc(2,Ee,8,2,"ng-template",60),e.YNc(3,Qe,2,3,"kendo-grid-column",96),e._UZ(4,"kendo-grid-excel",64),e.ALo(5,"date"),e.qZA()}if(2&n){const t=e.oxw(2),i=e.MAs(1);e.Q6J("ngStyle",e.DdM(15,De))("kendoGridBinding",t.querytable.childrengrid.data)("skip",0)("pageSize",30)("scrollable","virtual")("virtualColumns",!0)("rowHeight",84)("height",i.offsetHeight-72)("filter",t.filter)("filterable","menu"),e.xp6(3),e.Q6J("ngForOf",t.querytable.childrengrid.columns.modified),e.xp6(1),e.MGl("fileName","Records ",e.xi3(5,12,t.utility.datetime,"short"),".xlsx")}}function je(n,c){if(1&n&&(e.TgZ(0,"div",92),e.YNc(1,Fe,6,16,"kendo-grid",93),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.querytable.childrengrid.show)}}const Re=function(n){return{active:n}};function Je(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",104),e.NdJ("click",function(){e.CHM(t);const l=e.oxw().$implicit;return e.oxw(2).nav.gototab(l)}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Re,t==i.nav.active)),e.xp6(1),e.hij(" ",i.nav.title[t]," ")}}function Ue(n,c){if(1&n&&(e.ynx(0),e.YNc(1,Je,2,4,"div",103),e.BQk()),2&n){const t=c.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.nav.state[t])}}function Me(n,c){if(1&n&&e.YNc(0,Ue,2,1,"ng-container",63),2&n){const t=e.oxw();e.Q6J("ngForOf",t.nav.links)}}function Le(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",108),e.TgZ(1,"button",109),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).pageNavigation("previous")}),e._UZ(2,"i",110),e.qZA(),e.TgZ(3,"button",109),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).pageNavigation("next")}),e._UZ(4,"i",111),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.disablePreviousButton),e.xp6(2),e.Q6J("disabled",t.disableNextButton)}}function Ye(n,c){if(1&n&&(e.TgZ(0,"div",112),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.lnq(" Total : ",t.totalRecCount," Records, Current Page Records : ",t.gridData.length,", Page No. : ",t.pageNumber," ")}}function Be(n,c){if(1&n&&(e.TgZ(0,"div",112),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" Total : ",t.gridData1.length," Records, Current Page Rows : ",t.gridData1.length," ")}}function Pe(n,c){if(1&n&&(e.TgZ(0,"div",105),e.YNc(1,Le,5,2,"div",106),e.TgZ(2,"div",70),e.YNc(3,Ye,2,3,"div",107),e.YNc(4,Be,2,2,"div",107),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isContainsNextRecordsUrl&&!t.querytable.childrengrid.show),e.xp6(2),e.Q6J("ngIf",!t.querytable.childrengrid.show),e.xp6(1),e.Q6J("ngIf",t.querytable.childrengrid.show)}}function He(n,c){if(1&n&&(e.TgZ(0,"label",130),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw().$implicit,l=e.oxw(3);e.xp6(1),e.Oqu(l.querytable.initialgriddata[i.dataitem.Id][t.key])}}function Ve(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"div",125),e.TgZ(2,"div",null,126),e.TgZ(4,"label",127),e._uU(5),e.qZA(),e.YNc(6,He,2,1,"label",128),e._UZ(7,"input",129),e.qZA(),e.qZA(),e.BQk()),2&n){const t=c.$implicit,i=e.oxw().$implicit,l=e.oxw(3);e.xp6(2),e.Gre("mb-6 p-1 rounded ",i.form.value[t.key]!=l.querytable.initialgriddata[i.dataitem.Id][t.key]&&""!=i.form.value[t.key]?"bg-clr3":"",""),e.xp6(3),e.Oqu(t.key),e.xp6(1),e.Q6J("ngIf",l.querytable.editor.modal.showinitial),e.xp6(1),e.Q6J("formControl",t.value)}}function $e(n,c){if(1&n&&(e.TgZ(0,"div",122),e.TgZ(1,"form",123),e.TgZ(2,"div",124),e.ynx(3),e.YNc(4,Ve,8,6,"ng-container",63),e.ALo(5,"keyvalue"),e.BQk(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=c.$implicit;e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("ngForOf",e.lcZ(5,2,t.form.controls))}}function Ge(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",131),e.TgZ(2,"div",70),e.TgZ(3,"button",132),e.NdJ("click",function(){return e.CHM(t),e.oxw(3).querytable.editor.modal.toggleinitial()}),e._UZ(4,"i",133),e._uU(5," Show initial values "),e.qZA(),e.TgZ(6,"button",35),e.NdJ("click",function(){e.CHM(t);const l=e.oxw(3);return l.querytable.editor.args.form.reset(l.querytable.editor.args.dataitem)}),e._UZ(7,"i",134),e._uU(8," Reset "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",131),e.TgZ(10,"div",70),e.TgZ(11,"button",135),e.NdJ("click",function(l){return e.CHM(t),e.oxw(3).querytable.editor.modal.saveformlater(l)}),e._UZ(12,"i",85),e._uU(13," Keep "),e.qZA(),e.TgZ(14,"button",136),e.NdJ("click",function(l){return e.CHM(t),e.oxw(3).querytable.editor.modal.closemodal(l)}),e._UZ(15,"i",79),e._uU(16," Discard "),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Gre("btn btn-sm ",t.querytable.editor.modal.showinitial?"btn-success":"btn-outline-secondary","")}}const ze=function(n){return{opacity:n}};function Ke(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div",114),e.TgZ(1,"div",115),e.TgZ(2,"div",116),e.TgZ(3,"div",117),e.TgZ(4,"h5",118),e._uU(5,"Edit record"),e.qZA(),e.TgZ(6,"div",119),e.NdJ("click",function(l){return e.CHM(t),e.oxw(2).querytable.editor.modal.closemodal(l)}),e.qZA(),e.qZA(),e.YNc(7,$e,6,4,"div",120),e.TgZ(8,"div",121),e.YNc(9,Ge,17,3,"ng-container",23),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(3,ze,t.querytable.editor.modal.opacity)),e.xp6(7),e.Q6J("ngIf",t.querytable.editor.args),e.xp6(2),e.Q6J("ngIf",null==t.querytable.editor.args?null:t.querytable.editor.args.form)}}function We(n,c){if(1&n&&e.YNc(0,Ke,10,5,"div",113),2&n){const t=e.oxw();e.Q6J("ngIf",t.querytable.editor.modal.show)}}const O=function(n){return{hide:n}},Xe=[{path:"",component:(()=>{class n{constructor(t,i,l){this.authservice=t,this.service=i,this.formBuilder=l,this.downloadGridLoading=!1,this.sampleQuery="",this.isQueryCount=!1,this.isQueryCountFromQuey=!1,this.gridViewData="data",this.originaleQuery="",this.gridDownloadData=[],this.searchFieldsItems=[],this.gridDownloadColumn=[],this.queryCount=0,this.recordId="",this.allCQueries=[],this.deleteCol=[],this.pageSize=2e3,this.totalItems=0,this.nextRecordsUrl="",this.isContainsNextRecordsUrl=!1,this.isDownloadData=!1,this.downloadedData=[],this.skip=0,this.queryText="Query Builder",this.checkedKey=[""],this.searchdata=[""],this.loading=!0,this.modeSet="multiple",this.checkObject="Object",this.gridCloumn=[],this.gridColumn=[],this.gridData=[],this.pageItems=[],this.gridData1=[],this.relationshipObject="",this.expandedKeys=[],this.loadingObject=!0,this.searchTerm="",this.queryData=[],this.childQuery=[],this.parentObject="",this.isShowLabelForObject=!1,this.dataItemList=[],this.searchFieldData=[],this.fieldDataItem=[],this.searchFieldInput="",this.isComponentsVisible=!0,this.isToggleValue=!1,this.isNavBarVisible=!0,this.isPanelVisible=!0,this.panelbar={isPanelVisible:!1},this.isAlert=!1,this.errorCode="",this.errorMessage="",this.nameUrl="",this.queryLimit=0,this.queryOffset=0,this.generatedQuery="",this.splitedQuery="",this.queryDataLength=0,this.itemLength=0,this.loadingWidth="",this.sObjInfo={},this.columns=[],this.queryfull=[],this.showNavButton=!1,this.disablePreviousButton=!0,this.disableNextButton=!1,this.colinfo=[],this.describes={},this.hiddencolumns=[],this.lastquery="",this.mapToFields=[],this.iconList={address:"address.png",calculated:"formula.png",currency:"dollar.png",email:"email.png",location:"location.png",percent:"percentage.png",phone:"phone.png",url:"website.png",byte:"byte.png",date:"date.png",datetime:"datetime.png",number:"number.png",string:"string.png",textarea:"string.png",boolean:"tficon.PNG",double:"double.png",time:"time.png",picklist:"picklist.png",fieldSearch:"search.png"},this.basetype={boolean:"boolean",double:"numeric",currency:"numeric",int:"numeric",datetime:"date",date:"date"},this.basetypeCustom={boolean:"checkbox",double:"number",currency:"number",int:"number",datetime:"datetime-local",date:"date",url:"url",email:"email",time:"time",phone:"tel",string:"text"},this.basetypeformat={currency:"{0:c}",datetime:"{0:d}",date:"{0:d}"},this.keys=[],this.showTreeView=!0,this.dataBox={},this.isExpanded=(r,s)=>this.keys.indexOf(s)>-1,this.userSessionToken=v.I8.sessiontoken,this.treelist={querycount:()=>{let r=this.authservice.getItemFromStorage("queryCount")||0;return parseInt(r)}},this.history={record:()=>{E.X.operation.history.add(this.querybuilder.queryoriginal,"soql")},load:()=>{const{datatemp:{history:{selected:r}}}=E.X;r&&"soql"==r.context&&(this.history.select(r,!0),r.history=r.context=null,S.y.maketoast({template:"Success",body:"Restored from history"}))},select:(r,s)=>{this.query=r.History||r.history,s&&this.querybuilder.ExecuteQuery()}},this.querybuilder={text:"",query:"",queryoriginal:"",queries:{main:[],children:[]},fields:{main:[],children:[],Ids:[]},relationships:{main:"",children:[]},tail:"",querynotail:"",hiddencols:[],ExecuteQuery:()=>{this.gridData=[],this.querybuilder.text=this.query,setTimeout(()=>{this.nav.updatestate("resultgrid"),this.lastquery=this.query.trim(),this.querybuilder.getqueryinfo(),this.querybuilder.queryModifier(),this.querybuilder.sobjDescription.get()},0)},getqueryinfo:()=>{this.querybuilder.query=this.querybuilder.queryoriginal=this.querybuilder.querynotail=this.querybuilder.tail=this.querybuilder.relationships.main="",this.querybuilder.fields.Ids=[],this.querybuilder.fields.children=[],this.querybuilder.fields.main=[],this.querybuilder.queries.children=[],this.querybuilder.queries.main=[],this.querybuilder.relationships.children=[],this.querybuilder.hiddencols=[],this.querybuilder.queryoriginal=this.query.replaceAll("\n"," ").trim(),this.querybuilder.query=this.querymodel=this.querybuilder.queryoriginal.replace(/select /gi,"SELECT ").replace(/ from /gi," FROM "),this.querybuilder.tail=this.querybuilder.query.split(" FROM").reverse()[0].trim().split(" ").splice(1).join(" "),this.querybuilder.querynotail=this.querybuilder.query.replace(this.querybuilder.tail,"").trim(),this.utility.findqueries(this.querybuilder.querynotail),this.querybuilder.fields.main=this.querybuilder.queries.main.join(",").replace("SELECT ","").split("FROM ")[0].split(",").filter(r=>""!=r).map(r=>r.trim()).map(r=>"id"==r||"ID"==r?"Id":r),this.querybuilder.fields.Ids=[...new Set(this.querybuilder.fields.main.map(r=>r.split(".").reverse().slice(1).reverse().join(".")))].map(r=>[...r.split("."),"Id"].filter(s=>""!=s).join(".")),this.querybuilder.hiddencols=this.querybuilder.fields.Ids.filter(r=>-1==this.querybuilder.fields.main.indexOf(r)),this.querybuilder.relationships.children=this.querybuilder.queries.children.map(r=>r.split(" FROM ")[1].trim()),this.querybuilder.relationships.main=this.querybuilder.querynotail.split(" FROM ").slice(-1)[0].trim()},queryModifier:()=>{let r=this.querybuilder.queries.children.map(s=>"("+this.utility.addIdIfMissing(s)+")").join(",");this.querybuilder.querynotail=r?"SELECT "+[...this.querybuilder.fields.main,...this.querybuilder.hiddencols,r].join(",")+" FROM"+this.querybuilder.querynotail.split("FROM").slice(-1)[0]:"SELECT "+[...this.querybuilder.fields.main,...this.querybuilder.hiddencols].join(",")+" FROM"+this.querybuilder.querynotail.split("FROM").slice(-1)[0],this.querybuilder.query=this.query=this.querybuilder.querynotail+" "+this.querybuilder.tail,this.hiddencolumns=this.querybuilder.hiddencols},sobjDescription:{get:()=>{this.colinfo=[...this.querybuilder.fields.main.map(r=>({name:r,type:null,updateable:!1,basetype:null,basename:r,from:this.querybuilder.relationships.main,hidden:!1})),...this.querybuilder.relationships.children.map(r=>({name:r,type:"childobject",updateable:!1,basetype:null,basename:r,from:this.querybuilder.relationships.main,hidden:!1}))],this.querybuilder.sobjDescription.RecursiveLookup()},RecursiveLookup:()=>{for(let r=0;r<this.colinfo.length;r++){let s=this.colinfo[r];if(null==s.type){if(!this.describes.hasOwnProperty(s.from)){this.service.executequery(this.sObjdiscriptionUrl.replace("queryObject",s.from)).toPromise().then(a=>{this.describes[s.from]=a,this.querybuilder.sobjDescription.RecursiveLookup()});break}if(s.basename.includes(".")){let a=s.basename.split(".")[0];s.basename=s.basename.split(".").slice(1).join("."),s.from=this.describes[s.from].fields.filter(o=>o.relationshipName===a)[0].referenceTo[0],this.querybuilder.sobjDescription.RecursiveLookup();break}{let a=this.describes[s.from].fields.filter(o=>o.name===s.basename)[0];a=a||{name:s.basename,type:"string ",updateable:!1,basetype:"",basename:s.basename,from:s.from,hidden:!1},s.type=a.type,s.basetype=this.basetype[s.type]?this.basetype[s.type]:"",s.basename=s.name.replace(/\./g,"$"),s.hidden=this.hiddencolumns.includes(s.name),s.updateable=a.updateable,r==this.colinfo.length-1&&(this.firstCallQueryData(),this.query=this.querybuilder.text)}}else r==this.colinfo.length-1&&(this.firstCallQueryData(),this.query=this.querybuilder.text)}}}},this.querytable={initialgriddata:[],firstrun:!0,name:"sobject",events:{cellClickHandler:r=>{let{sender:s,rowIndex:a,dataItem:o,isEdited:u}=r,h=this.colinfo.reduce((d,b)=>Object.assign(Object.assign({},d),{[b.name]:b}),{}),f=r.originalEvent.target,_=()=>{let d=Object.keys(o).filter(b=>h[b]&&h[b].updateable).reduce((b,q)=>Object.assign(Object.assign({},b),{[q]:o[q]}),{});this.querytable.editor.args={rowIndex:a,dataitem:o,form:this.formBuilder.group(d)},x.c.log("editablefields",d,this.querytable.editor.args.form)};switch(f.id){case"keep":this.querytable.editor.row.closeEditor(a,!0,!0);break;case"cancel":this.querytable.editor.row.closeEditor(a,!1,!0);break;case"quickedit":_(),this.querytable.editor.row.quickEdit(u,s,a);break;case"fulledit":_(),this.querytable.editor.modal.fullEdit(u);break;default:if("Editor"!=r.column.title&&f.className.includes("text-primary")){let d=h[r.column.title];"id"==d.type||"reference"==d.type?this.utility.openwindowforid(o[r.column.field]):"childobject"==d.type&&o[r.column.field]&&(this.querytable.childrengrid.open(o[r.column.field],r.column.title),this.querytable.childrengrid.name=d.basename)}}},virtualPageChange:r=>{}},refresh:()=>{this.querytable.loading=!0,this.querybuilder.ExecuteQuery()},exportexcel:r=>{this.gridComp.saveAsExcel()},excelexportgriddata(){return{data:this.gridData}},loading:!1,onloading:()=>{this.querytable.loading=!0},onloaded:()=>{this.querytable.loading=!1,this.querytable.childrengrid.show=!1,0!=this.gridData.length&&(this.querytable.initialgriddata=this.gridData.map(r=>Object.assign({},r)).reduce((r,s)=>Object.assign(Object.assign({},r),{[s.Id]:s}),{})),S.y.maketoast({template:"Success",body:this.gridData.length>0?this.gridData.length+" Records fetched":"No records found for this query"}),this.history.record(),this.querybuilder.queries.main.length>0&&(this.querytable.name=this.querybuilder.queries.main[0].split("FROM ")[1])},onloadfail:()=>{this.querytable.loading=!1},editor:{active:!1,args:null,toggle:()=>{this.querytable.editor.active=!this.querytable.editor.active,this.querytable.editor.args=null},row:{quickEdit:(r,s,a)=>{r||s.editRow(a,this.querytable.editor.args.form)},closeEditor:(r,s,a)=>{this.querytable.editor.args&&this.querytable.editor.args.rowIndex===r===a&&(this.gridComp.closeRow(this.querytable.editor.args.rowIndex),s&&this.querytable.editor.submitchangemodal(this.querytable.editor.args.form.value),this.querytable.editor.args=null)}},modal:{show:!1,opacity:0,showinitial:!1,toggleinitial:()=>{this.querytable.editor.modal.showinitial=!this.querytable.editor.modal.showinitial},toggle:r=>{this.querytable.editor.modal.show=r=null!=r?r:!this.querytable.editor.modal.show,setTimeout(()=>this.querytable.editor.modal.opacity=r?1:0,0)},fullEdit:r=>{r||this.querytable.editor.modal.toggle(!0)},closemodal:r=>{("fademe"==r.target.id||"canclose"==r.target.id)&&(this.querytable.editor.modal.toggle(!1),this.querytable.editor.args=null)},saveform:r=>{this.querytable.editor.submitchangemodal(this.querytable.editor.args.form.value),this.querytable.editor.saveChanges(),this.querytable.editor.modal.closemodal(r)},saveformlater:r=>{this.querytable.editor.submitchangemodal(this.querytable.editor.args.form.value),this.querytable.editor.modal.closemodal(r)}},celleditbackup:[],saveChanges:()=>{this.querytable.onloading();let r={allOrNone:!1,records:[]};this.querytable.editor.celleditbackup.forEach(a=>{let o={attributes:{type:this.colinfo.filter(u=>u.basename==a.edited.field)[0].from},id:a.edited.Id};o[a.edited.field.replace(/\$/g,".")]=a.edited.value,r.records.push(o)}),this.service.patchsObjects(v.I8.instanceUrl+"/services/data/v45.0/composite/sobjects",r).toPromise().then(a=>{let o=a.filter(h=>h.success).length,u=a.length;a.statusText=o+" out of "+a.length+" changes were saved successfully",S.y.maketoast({template:o==u?"success":"warning",body:a,duration:o==u?4e3:-1}),this.querybuilder.ExecuteQuery(),this.querytable.editor.cancelChanges()}).catch(a=>{S.y.maketoast({template:"ERROR",body:"Could not be saved"}),this.querytable.editor.cancelChanges(),this.querybuilder.ExecuteQuery()})},cancelChanges:()=>{this.querytable.editor.args&&this.gridComp.closeRow(this.querytable.editor.args.rowIndex);for(let r=0;r<this.gridData.length;r++){const s=this.gridData[r];for(let a=0;a<this.querytable.editor.celleditbackup.length;a++){const o=this.querytable.editor.celleditbackup[a];s.Id==o.original.Id&&(this.gridData[r][o.edited.field]=o.original.value)}}this.querytable.editor.celleditbackup=[]},submitchangemodal:r=>{let s=Object.entries(r).filter(u=>u[1]!=this.querytable.editor.args.dataitem[u[0]]);Object.assign({},s);let o=(u,h,f)=>{let p=this.querytable.editor.celleditbackup.filter(_=>_.edited.Id==h.Id&&_.edited.field==u)[0];if(p){let _=this.querytable.editor.celleditbackup.indexOf(p);p.original.value==f[u]?this.querytable.editor.celleditbackup.splice(_,1):this.querytable.editor.celleditbackup[_].edited={Id:h.Id,field:u,value:f[u]}}else this.querytable.editor.celleditbackup.push({original:{Id:h.Id,field:u,value:this.querytable.initialgriddata[h.Id][u]},edited:{Id:h.Id,field:u,value:f[u]}});Object.assign(h,f)};for(let u=0;u<s.length;u++)o(s[u][0],this.querytable.editor.args.dataitem,r)},submitchange:r=>{let s=Object.entries(r).filter(o=>o[1]!=this.querytable.editor.args.initialform[o[0]]),a=(o,u,h)=>{let f=this.querytable.editor.celleditbackup.filter(p=>p.edited.Id==u.Id&&p.edited.field==o)[0];if(f){let p=this.querytable.editor.celleditbackup.indexOf(f);f.original.value==h[o]?this.querytable.editor.celleditbackup.splice(p,1):this.querytable.editor.celleditbackup[p].edited={Id:u.Id,field:o,value:h[o]}}else this.querytable.editor.celleditbackup.push({original:{Id:u.Id,field:o,value:u[o]},edited:{Id:u.Id,field:o,value:h[o]}});Object.assign(u,h)};for(let o=0;o<s.length;o++)a(s[o][0],this.querytable.editor.args.initialform,r)}},childrengrid:{excelexportgriddata(){return{data:this.gridData1}},events:{cellClickHandler:r=>{r.originalEvent.target.className.includes("text-primary")&&this.utility.openwindowforid(r.dataItem[r.column.field])}},name:"child",show:!1,data:[],columns:{real:[],modified:[]},open:(r,s)=>{this.onColumnSelect(r);let a=this.querytable.childrengrid.columns.real=this.querybuilder.queries.children.filter(o=>o.split(" ").slice(-1)==s)[0].replace("SELECT ","").split("FROM ")[0].split(",").map(o=>o.trim());this.querytable.childrengrid.columns.modified=a.map(o=>o.replace(".","$")),this.querytable.childrengrid.data=r.data.map(o=>this.querytable.childrengrid.columns.modified.reduce((u,h)=>Object.assign(Object.assign({},u),{[h]:this.utility.typecorrect(this.utility.getnestedvalue(o,h))}),{})),this.querytable.childrengrid.show=!0},close:()=>{this.querytable.childrengrid.show=!1}}},this.nav={title:{querybuilder:"Query builder",resultgrid:"Results",history:"History"},state:{querybuilder:!0,resultgrid:!1,history:!0},links:["querybuilder","resultgrid","history"],icon:{querybuilder:"bi bi-hammer",resultgrid:"bi bi-border-all",history:"bi bi-clock"},active:"querybuilder",querybuilder:"querybuilder",resultgrid:"resultgrid",gototab:r=>{this.nav.active=r,this.nav.active==this.nav.querybuilder&&(this.querytable.editor.cancelChanges(),this.querytable.editor.args=null)},updatestate:r=>{if("resultgrid"==r){let s=this.nav.state.resultgrid;this.nav.state.resultgrid=this.gridData.length>0,this.gridData.length&&s!=this.nav.state.resultgrid&&(this.nav.active="resultgrid")}}},this.utility={vh2px:r=>Math.round(window.innerHeight/(100/r)),getHeight:r=>r.offsetHeight,editedcells:(r,s)=>!!this.querytable.editor.celleditbackup.filter(a=>a.edited.Id==r.Id&&a.edited.field==s.basename)[0],addIdIfMissing:r=>0==r.replace("SELECT ","").split("FROM ")[0].split(",").map(s=>s.trim()).filter(s=>"Id"==s).length?r.replace("SELECT ","SELECT Id,"):r,findqueries:r=>{let s=r.split(",");s[0]?s[0].includes("(")?(this.querybuilder.queries.children.push(r.split("(")[1].split(")")[0]),this.utility.findqueries(r.split(")").slice(1).join(")"))):(this.querybuilder.queries.main.push(s[0].replace(",","").trim()),this.utility.findqueries(r.split(",").slice(1).join(","))):s[1]&&this.utility.findqueries(r.split(",").slice(1).join(","))},getnestedvalue:function(r,s){let a=s.split("$");for(r=r[a[0]];a.length>1;)a.splice(0,1),r=r[a[0]];return r},typecorrect:function(r){return r&&("object"!=typeof r?r:JSON.stringify(r))},openwindowforid:r=>{x.Y.chrome.windows.create({url:v.I8.instanceUrl+"/"+r})},onWindowOpen(r,s,a,o){o&&/^[0-9a-zA-Z]{15}([0-9a-zA-Z]{3})?$/.test(r)&&x.Y.chrome.windows.create({url:v.I8.instanceUrl+"/"+r})},datetime:Date.now()},this.querytable.excelexportgriddata=this.querytable.excelexportgriddata.bind(this),this.querytable.childrengrid.excelexportgriddata=this.querytable.childrengrid.excelexportgriddata.bind(this),this.gridView={data:[],total:0},window.addEventListener("beforeunload",function(r){r.preventDefault(),r.returnValue=""})}handleClear(){this.query="",this.queryData=[],this.childQuery=[],this.expandedKeys=[],this.generatedQuery="";for(let t=0;t<this.dataItemList.length;t++)if(this.dataItemList[t].isChecked=!1,0!=this.dataItemList[t].items.length)for(let i=0;i<this.dataItemList[t].items.length;i++)this.dataItemList[t].items[i].isChecked=!1}get showClearButton(){for(let t=0;t<this.dataItemList.length;t++){if(this.dataItemList[t].isChecked)return!0;if(0!=this.dataItemList[t].items.length)for(let i=0;i<this.dataItemList[t].items.length;i++)if(this.dataItemList[t].items[i].isChecked)return!0}}panelVisible(t){this.isPanelVisible=t[0].expanded}getRecordTypeOrValidationRule(t,i){return new Promise(function(l,r){this._schemaExplorerService.getRecordTypeOrValidationRule(v.I8.instanceUrl+(i?"/services/data/v45.0/tooling/query?q=select Id, Name, Description,Metadata, IsActive from RecordType where EntityDefinitionId='":"/services/data/v45.0/tooling/query?q=Select Id,Active,Description,Metadata,EntityDefinition.DeveloperName,ErrorDisplayField, ErrorMessage From ValidationRule where EntityDefinition.DeveloperName ='")+t+"'").toPromise().then(a=>a).then(a=>{let o=[];if(a.totalSize>0)for(let p of a.records){let _={};_=i?{Label:p.Metadata.label,Name:p.Name,Description:p.Description,Active:p.IsActive}:{Name:p.Name,Description:p.Description,Active:p.Active,"Error Condition Formula":p.Metadata.errorConditionFormula,"Error Location":p.ErrorDisplayField,"Error Message":p.ErrorMessage},o.push(_)}let u=[];for(let p of Object.keys(o[0]))u.push({value:p,background:"#aabbcc"});let h=[];for(let p of o){let _=[];for(let d of Object.keys(o[0]))_.push({value:p[d]});h.push({cells:[].concat(_)})}let f=[{cells:[]},{cells:[]},{cells:[{value:"",background:"#aabbcc"},{value:"",background:"#aabbcc"},{value:i?"Record Type":"Validation Rule",background:"#aabbcc"},{value:"",background:"#aabbcc"},{value:"",background:"#aabbcc"}]},{cells:[].concat(u)}].concat(h);l(f)})})}handleCollapse(t){this.keys=this.keys.filter(i=>i!==t.index)}ngOnInit(){this.queryCount=this.treelist.querycount(),this.nameUrl=v.I8.instanceUrl,this.sObjdiscriptionUrl=v.I8.instanceUrl+"/services/data/v45.0/sobjects/queryObject/describe",this.loadingWidth=-(window.innerWidth-.25*window.innerWidth)+"px",this.fetchSObjects(),this.history.load()}convertString(t){return JSON.stringify(t)}changePanelVisibility(){this.isPanelVisible=!this.isPanelVisible}openNav(){this.isNavBarVisible=!this.isNavBarVisible,this.showTreeView=!this.showTreeView}onSearchField(t,i,l){var r=l,s=this.keys.indexOf(l);if(-1!==s&&this.keys.splice(s,1),t.items=this.arrayDataLocal.items.filter(u=>u.text.toLowerCase().includes(i.toLowerCase())),-1!==s){var a=this;setTimeout(()=>{a.keys.push(r)},100)}}searchField(t,i){if("fields"==t.text){var l=i,r=this.keys.indexOf(i);if(-1!==r&&this.keys.splice(r,1),t.isInput=!t.isInput,t.isInput){t.icon="../assets/close.png",this.authservice.setItemToStorage("dataItem",t),this.arrayDataLocal=JSON.parse(JSON.stringify(t));let h="";t.items=this.arrayDataLocal.items.filter(p=>p.text.toLowerCase().includes(h.toLowerCase()));let f={parentName:this.arrayDataLocal.parentName,items:this.arrayDataLocal};if(null==this.searchFieldsItems)this.searchFieldsItems=[],this.searchFieldsItems.push(f);else{var s=!1;for(let p=0;p<this.searchFieldsItems.length;p++)if(this.searchFieldsItems[p].parentName==this.arrayDataLocal.parentName){s=!0,this.searchFieldsItems[p]=f;break}s||this.searchFieldsItems.push(f)}}else for(let h=0;h<this.searchFieldsItems.length;h++)if(this.searchFieldsItems[h].parentName==t.parentName){t.icon="../assets/search.png",t.isInput=!1,t.items=this.searchFieldsItems[h].items.items;break}let u=!1;for(let h of this.dataItemList)if("fields"==h.text&&h.parentName==t.parentName){for(let f of h.items){if(!f.isChecked){h.isChecked=!1,u=!1;break}u=!0}u&&(h.isChecked=u)}if(-1!==r){var a=this;setTimeout(()=>{a.keys.push(l)},100)}}}removeByValue(t,i,l,r){for(var s=0;s<t.length;s++)null==t[s].relationshipName&&(t[s].relationshipName=""),t[s].fieldName==i&&t[s].parentName==l&&t[s].relationshipName==r&&t.splice(s,1)}selectedCheckBox(t,i){this.isPanelVisible=this.isPanelVisible?this.isPanelVisible:!this.isPanelVisible;let l=[],r=[];null==i.relationshipName&&(i.relationshipName="");var s=i.relationshipName;if("reference"==i.type&&(s="",i.relationshipName.includes("."))&&((o=i.relationshipName.split(".")).length=o.length-1,o.length>0&&(s=o.join("."))),i.items.length>0&&"fields"==i.data){if(i.items[0].isChildRelation){r=this.childQuery;for(let d of r)d.parentName!=i.parentName&&(l=[...l,d]);this.childQuery=l}else for(let d of i.items){var o,u=d.relationshipName;if("reference"==d.type&&(u="",null!=d.relationshipName&&d.relationshipName.includes(".")))(o=d.relationshipName.split(".")).length=o.length-1,o.length>0&&(u=o.join("."));this.removeByValue(this.queryData,d.data,d.parentName,"reference"==d.type?u:d.relationshipName)}for(let d of i.items)if(d.isChecked=t,d.isChildRelation)t?this.childQuery.push({relationshipName:i.relationshipName,fieldName:d.data,parentName:d.parentName,data:d}):this.removeByValue(this.childQuery,d.data,d.parentName,d.relationshipName);else if(""==this.parentObject)(""==d.relationshipName||null==d.relationshipName)&&(this.parentObject=d.parentName),t?this.queryData.push({relationshipName:"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName,fieldName:d.data,parentName:d.parentName,data:d}):this.removeByValue(this.queryData,d.data,d.parentName,"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName);else{if((""==d.relationshipName||null==d.relationshipName)&&this.parentObject!=d.parentName){this.queryData=[];for(let b of this.dataItemList)if(b.isChecked=!1,"fields"==b.data&&b.items.length>0)for(let q of b.items)q.isChecked=!1}(""==d.relationshipName||null==d.relationshipName)&&(this.parentObject=d.parentName),t?this.queryData.push({relationshipName:"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName,fieldName:d.data,parentName:d.parentName,data:d}):this.removeByValue(this.queryData,d.data,d.parentName,"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName)}}else if(i.isChildRelation)t?this.childQuery.push({relationshipName:i.relationshipName,fieldName:i.data,parentName:i.parentName,data:i}):this.removeByValue(this.childQuery,i.data,i.parentName,i.relationshipName);else if(""==this.parentObject)(""==i.relationshipName||null==i.relationshipName)&&(this.parentObject=i.parentName),t?this.queryData.push({relationshipName:"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName,fieldName:i.data,parentName:i.parentName,data:i}):this.removeByValue(this.queryData,i.data,i.parentName,"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName);else{if((""==i.relationshipName||null==i.relationshipName)&&this.parentObject!=i.parentName){this.queryData=[];for(let d of this.dataItemList)if(d.isChecked=!1,"fields"==d.data&&d.items.length>0)for(let b of d.items)b.isChecked=!1}(""==i.relationshipName||null==i.relationshipName)&&(this.parentObject=i.parentName),t?this.queryData.push({relationshipName:"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName,fieldName:i.data,parentName:i.parentName,data:i}):this.removeByValue(this.queryData,i.data,i.parentName,"reference"==i.type?s:null==i.relationshipName?"":i.relationshipName)}i.isChecked=t,this.dataItemList.push(i);let h=!1;for(let d of this.dataItemList)if("fields"==d.text&&d.parentName==i.parentName){for(let b of d.items){if(!b.isChecked){d.isChecked=!1,h=!1;break}h=!0}h&&(d.isChecked=h)}let f="";for(let d of this.queryData)f=""==f?(""==d.relationshipName||null==d.relationshipName?"":d.relationshipName+".")+d.fieldName:f+" , "+(""==d.relationshipName||null==d.relationshipName?"":d.relationshipName+".")+d.fieldName;var p=this.childQuery.reduce(function(d,b){var q=d.findIndex(function(N){return N.parentName===b.parentName});return-1===q?d.push({parentName:b.parentName,value:[b]}):d[q].value.push(b),d},[]);let _="";for(let d of p){let b="";for(let q of d.value)b=""==b?q.fieldName:b+","+q.fieldName;_=""==_?"(SELECT "+b+" FROM "+d.parentName+")":_+", (SELECT "+b+" FROM "+d.parentName+")"}this.query=""==_&&""==f?"":""==_?"SELECT "+f+" FROM "+this.parentObject:""==f?"SELECT "+_+" FROM "+this.parentObject:"SELECT "+f+" , "+_+" FROM "+this.parentObject}selectLabelsForObjects(t){this.loadingObject=!0,this.searchTerm="",this.keys=[],this.fetchSObjects(),this.isShowLabelForObject=!this.isShowLabelForObject}isString(t){return"string"==typeof t}isObject(t){return"object"==typeof t}close(){this.querytable.childrengrid.show=!1,this.isAlert=!1}onColumnSelect(t){if("object"==typeof t){this.relationshipObject=t.data[0].attributes.type,this.gridColumn=Object.keys(t.data[0]);var i=this.gridColumn.indexOf("attributes");i>-1&&this.gridColumn.splice(i,1),this.gridData1=t.data,this.querytable.childrengrid.show=!0}}isSalesforceId(t){let i=t.substring(0,15);for(let l=0;l<3;l++){let r=0;for(let s=0;s<5;s++){let a=i.charAt(5*l+s);a>="A"&&a<="Z"&&(r+=1<<s)}i+="ABCDEFGHIJKLMNOPQRSTUVWXYZ012345".charAt(r)}return t==i}isId(t){return!!/^[0-9a-zA-Z]{15}([0-9a-zA-Z]{3})?$/.test(t)&&this.isSalesforceId(t)}onChildWindowOpen(t,i,l){l&&/^[0-9a-zA-Z]{15}([0-9a-zA-Z]{3})?$/.test(t)&&x.Y.chrome.windows.create({url:v.I8.instanceUrl+"/"+t})}onkeyup(t){this.keys=[],this.data=this.searchdata.filter(i=>i.text.toLowerCase().includes(t.toLowerCase()))}search(t,i){return t.reduce((l,r)=>{if(this.contains(r.text,i))l.push(r);else if(r.items&&r.items.length>0){let s=this.search(r.items,i);s.length>0&&l.push({text:r.text,items:s})}return l},[])}contains(t,i){return t.toLowerCase().indexOf(i.toLowerCase())>=0}removeDups(t){let i={};return t.forEach(function(l){i[l]||(i[l]=!0)}),Object.keys(i)}parseQuery(t){var i="";t.includes("(")?t.includes(")")&&(i=t.substring(t.indexOf("(")+1,t.indexOf(")")),t=t.replace("("+i+")",""),this.allCQueries.push(i.trim()),this.parseQuery(t)):this.originaleQuery=t}recursionMethod(t,i){var l=[],r=Object.keys(t);if(t.hasOwnProperty("attributes"))for(var s in r)"object"==typeof t[r[s]]&&"attributes"!=r[s]?null==t[r[s]]||t[r[s]].hasOwnProperty("records")?null!=t[r[s]]&&t[r[s]].hasOwnProperty("records")&&l.push(null==i?r[s]:i+"."+r[s]):l=l.concat(this.recursionMethod(t[r[s]],null==i?r[s]:i+"."+r[s])):"attributes"!=r[s]&&l.push(null==i?r[s]:i+"."+r[s]);else l.push(i);return l}capitalizeFLetter(t){var i="";if(Array.isArray(t)){for(var l=0;l<t.length;l++)i=(i?i+".":"")+this.capitalizeFLetter(t[l]);return i}return t.includes(".")?this.capitalizeFLetter(t.split(".")):t}pageNavigation(t){this.disablePreviousButton=!0,this.disableNextButton=!0,this.querytable.onloading();const i=JSON.parse(x.Y.browserStorage.getStorage("sbPageInfo"));if("previous"==t){this.pageNumber=this.pageNumber-1;let l=i[i.length-3].url;l?this.service.executequery(v.I8.instanceUrl+l).subscribe(s=>{this.creategriddatafromresponse(s),this.nextPageUrl=s.nextRecordsUrl,i.splice(i.length-1,1),x.Y.browserStorage.deleteStorage("sbPageInfo"),x.Y.browserStorage.setStorage("sbPageInfo",JSON.stringify(i)),this.disableNextButton=!1,this.disablePreviousButton=!1}):this.service.executequery(v.I8.instanceUrl+"/services/data/v49.0/query/?q="+this.generatedQuery).subscribe(s=>{this.creategriddatafromresponse(s),this.nextPageUrl=s.nextRecordsUrl,this.totalRecCount=s.totalSize;let a=[{pageNo:1,url:""},{pageNo:2,url:s.nextRecordsUrl}];x.Y.browserStorage.deleteStorage("sbPageInfo"),x.Y.browserStorage.setStorage("sbPageInfo",JSON.stringify(a)),this.disableNextButton=!1})}else"next"==t&&(this.pageNumber=this.pageNumber+1,this.service.executequery(v.I8.instanceUrl+i[i.length-1].url).subscribe(s=>{this.creategriddatafromresponse(s),this.nextPageUrl=s.nextRecordsUrl,i.splice(i.length,0,{pageNo:i.length+1,url:s.nextRecordsUrl}),x.Y.browserStorage.deleteStorage("sbPageInfo"),x.Y.browserStorage.setStorage("sbPageInfo",JSON.stringify(i)),this.disableNextButton=!1,this.disablePreviousButton=!1,s.done&&(this.disableNextButton=!0)}))}fetchQuery(){this.querytable.onloading(),this.gridLoading=!this.isDownloadData,this.service.executequery(v.I8.instanceUrl+(this.isContainsNextRecordsUrl?this.nextRecordsUrl:"/services/data/v45.0/query/?q="+this.generatedQuery)).toPromise().then(i=>{if(i.done)return i;{this.showNavButton=!0,this.nextPageUrl=i.nextRecordsUrl,this.totalRecCount=i.totalSize;let l=[{pageNo:1,url:""},{pageNo:2,url:i.nextRecordsUrl}];return this.pageNumber=1,x.Y.browserStorage.setStorage("sbPageInfo",JSON.stringify(l)),i}}).then(i=>{this.totalItems=i.totalSize,null!=i.nextRecordsUrl&&null!=i.nextRecordsUrl?(this.recordId=i.nextRecordsUrl.split("/services/data/v45.0/query/")[1].split("-")[0],this.isContainsNextRecordsUrl=!0):(this.isContainsNextRecordsUrl=!1,this.totalRecCount=i.records.length,this.pageNumber=1),this.creategriddatafromresponse(i)}).catch(i=>{this.nav.updatestate("resultgrid"),this.gridLoading=!1,this.errorCode="An error occured",this.errorMessage=i.message,this.querytable.onloaded()})}creategriddatafromresponse(t){if(null!=t&&t.totalSize>0&&t.records.length>0){for(var i=t.records,l=[],r=0;r<i.length;r++)l=l.concat(this.recursionMethod(i[r],null));this.allCQueries=[],this.originaleQuery="",this.parseQuery(this.generatedQuery.toLowerCase());var a=this.originaleQuery.substring(6,this.originaleQuery.lastIndexOf("from")).split(","),o=[];for(r=0;r<a.length;r++)a[r].trim()&&o.push(a[r].trim().toLowerCase());var u=[];for(r=0;r<this.allCQueries.length;r++)if(this.allCQueries[r]){var h=this.allCQueries[r].toLowerCase();if(h.indexOf("from")>=0){var f=h.substring(h.indexOf("from")+5,h.length).trim();-1!=f.indexOf(" ")&&(f=f.substring(0,f.indexOf(" "))),""!=f&&u.push(f)}}l.push(Object.keys(this.sObjInfo)),l=this.removeDups(l);let N=[];for(var p=0;p<o.length;p++){let m=!1;for(var _=0;_<l.length;_++)if(l[_].toLowerCase()===o[p].toLowerCase()){N.push(l[_]),m=!0;break}m||N.push(this.capitalizeFLetter(o[p]))}for(p=0;p<l.length;p++)(q=u.indexOf(l[p].toLowerCase()))>-1&&(N.push(l[p]),u.splice(q,1));N=N.concat(u);for(let m of i)if(l.length>0){for(let g of l)if(g.includes(".")){var d=Array.isArray(g)?g:g.split(".");m[g]=d.reduce((T,U)=>T&&T[U],m)}else if("object"==typeof m[g]&&null!=m[g]&&m[g].hasOwnProperty("records")){for(let U of m[g].records);let T={text:m[g].records.length+" records",data:m[g].records};m[g]=T,m.jsonData=T}else if("object"==typeof m[g]&&null!=m[g]&&m[g].hasOwnProperty("url")){var b=m[g].url.split("/");m.url=v.I8.instanceUrl+"/"+b[b.length-1]}}else delete m.attributes;var q;if((q=l.indexOf("attributes"))>-1&&l.splice(q,1),0==this.gridView.total)if(this.gridCloumn=N,this.pageItems=i,this.isDownloadData){this.downloadedData=[...this.downloadedData,...i];let m=this.downloadedData;this.downloadedData&&m.forEach(g=>{Object.keys(g).forEach(T=>{"boolean"!=typeof g[T]&&"string"!=typeof g[T]&&delete g[T]})}),this.totalItems==this.downloadedData.length?(this.isDownloadData=!1,this.skip=0):this.Next()}else this.gridData=i,this.isQueryCount=!(!this.isQueryCountFromQuey||20!=this.queryCount),this.isQueryCountFromQuey=!1;let F=[];for(let m of Object.keys(this.gridData[0]))this.gridCloumn.includes(m)||F.push(m);for(let m of this.gridData)for(let g of F)"jsonData"!=g&&delete m[g];let j=this.colinfo.reduce((m,g)=>Object.assign(Object.assign({},m),{[g.name]:g.type}),{});this.gridData.forEach(m=>{for(const g in m)m[g]&&("date"===this.basetype[j[g]]?m[g]=new Date(m[g]):"address"===j[g]&&(m[g]=JSON.stringify(m[g])))});let R=[];for(let m=0;m<this.gridData.length;m++){let g={};for(let T in this.gridData[m])g[T.replace(/\./g,"$")]=this.gridData[m][T];R.push(g)}this.gridData=R;let J=[];for(let m of Object.keys(this.gridData[0]))J.push(m);this.gridColumn=J,this.nav.updatestate("resultgrid")}else this.errorCode="0 Records",this.errorMessage="No Records To Display",this.isAlert=!0,this.nav.updatestate("resultgrid");this.querytable.onloaded(),this.mapToFields=Object.keys(t.records[0]).map(N=>N.replace(/\./g,"$")),setTimeout(()=>{this.gridLoading=!1},800)}Previous(){this.isQueryCountFromQuey=!1,this.skip=this.skip-this.pageSize,this.nextRecordsUrl="/services/data/v45.0/query/"+this.recordId+"-"+this.skip,this.fetchQuery()}Next(){this.isContainsNextRecordsUrl&&(this.isQueryCountFromQuey=!1,this.skip=this.skip+this.pageSize,this.nextRecordsUrl="/services/data/v45.0/query/"+this.recordId+"-"+this.skip,this.fetchQuery())}queryCountClose(t){this.isQueryCount=!1}reviewWindow(){this.isQueryCount=!1,x.Y.chrome.windows.create({url:"https://chrome.google.com/webstore/detail/salesforce-schema-explore/legnafcbagbfjfoekfdlcpibnbkphenl"})}firstCallQueryData(){this.isQueryCountFromQuey=!0,this.queryCount=this.treelist.querycount(),this.queryCount+=1,this.authservice.setItemToStorage("queryCount",this.queryCount),this.generatedQuery=this.query.replace(/%/g,"%25"),this.generatedQuery=this.generatedQuery.replace(/[\r\n]+/gm," "),this.skip=0,this.downloadedData=[],this.isContainsNextRecordsUrl=!1,this.isDownloadData=!1,this.gridData=[],this.recordId="",this.showTreeView=!0,this.isComponentsVisible=!1,this.isNavBarVisible=!1,this.changePanelVisibility(),this.fetchQuery(),this.query.length>250?(this.queryToShow=this.query.lastIndexOf(" FROM ")>151?this.query.substring(0,50)+"... ":this.query.substring(0,this.query.lastIndexOf(" FROM ")),this.query.substring(this.query.lastIndexOf("FROM"),this.query.length).length>100?this.queryToShow+=this.query.substring(this.query.lastIndexOf(" FROM "),this.query.lastIndexOf(" FROM ")+46)+"...":this.queryToShow+=this.query.substring(this.query.lastIndexOf(" FROM "),this.query.length)):this.queryToShow=void 0}fetchChildren(t){return(0,D.of)(t.items)}checkLastRelationshipName(t){if(null==t)return!1;let i=t.split(".");return null!=i[i.length-1]&&!("null"==i[i.length-1]&&null==i[i.length-1]&&null==i[i.length-1]&&""!=i[i.length-1])}hasChildren(t){let i=!1;if(null!=t.relationshipName){let l=t.relationshipName.split(".");i="null"==l[l.length-1]||null==l[l.length-1]}return t.items&&t.items.length>0&&!i}handleExpand(t){var l=t.index.split("_");if(this.itemLength=l.length,t.dataItem.isParent){this.modeSet="single",this.query="",this.queryData=[],this.childQuery=[],this.expandedKeys=[],this.parentObject=t.dataItem.data,this.isPanelVisible=!0;for(let r of this.dataItemList)if(r.isChecked=!1,"fields"==r.data&&r.items.length>0)for(let s of r.items)s.isChecked=!1;this.dataItemList=[],this.getSObjectDescription(t,!0,!0),this.keys=[];for(let r of t.dataItem.items)if("fields"==r.text){this.dataItemList.push(r);for(let s=0;s<this.searchFieldsItems.length;s++)if(this.searchFieldsItems[s].parentName==r.parentName){for(let a of this.searchFieldsItems[s].items.items)a.isChecked=!1;r.icon="../assets/search.png",r.isInput=!1,r.items=this.searchFieldsItems[s].items.items;break}}}else t.dataItem.isChild?(this.modeSet="multiple",this.getSObjectDescription(t,!1,!0)):t.dataItem.isParentApplicable&&this.itemLength<=16&&("reference"==t.dataItem.type||this.getSObjectDescription(t,!0,!1),this.modeSet="multiple");this.searchFieldData=JSON.parse(JSON.stringify(this.data)),this.keys=this.keys.concat(t.index)}getSObjectDescription(t,i,l){let r="",s=t.dataItem.data;r=i?t.dataItem.data:t.dataItem.text,void 0===this.dataBox[s]?(this.dataBox[s]={},x.c.log("data not exists"),this.service.executequery(v.I8.instanceUrl+"/services/data/v45.0/sobjects/"+r+"/describe").toPromise().then(o=>(this.dataBox[s]=o,this.describes[r]||(this.describes[r]=o),o)).then(o=>{this.dataProcessing(o,i,t,l)}),t.dataItem.items=[...t.dataItem.items,{text:"\u231b Loading..."},{text:"\u231b Loading..."}]):(x.c.log("data exists"),this.service.getDatafromBox(this.dataBox[s]).toPromise().then(a=>(x.c.log("response",a),this.dataBox[s]=a,this.describes[r]||(this.describes[r]=a),a)).then(a=>{this.dataProcessing(a,i,t,l)}),t.dataItem.items=[...t.dataItem.items,{text:"\u231b Loading..."},{text:"\u231b Loading..."}])}dataProcessing(t,i,l,r){let s=[],a={};for(var o=0;o<t.childRelationships.length;o++)i&&null!=t.childRelationships[o].relationshipName&&s.push({text:t.childRelationships[o].childSObject,data:t.childRelationships[o].relationshipName,isParent:!1,parentName:l.dataItem.data,isChild:!0,items:[{text:"Relationship Name: "+t.childRelationships[o].relationshipName},{text:"Relationship Field: "+t.childRelationships[o].field}]}),a={text:"childRelationships",data:"childRelationships",isParent:!1,hasChildren:!0,isChecked:!1,parentName:l.dataItem.text,items:s};let u=[];for(var h=0;h<t.fields.length;h++){let _={text:this.isShowLabelForObject?t.fields[h].label:t.fields[h].name,data:t.fields[h].name,type:t.fields[h].type,icon:this.setIcons(t.fields[h].type),isParent:!1,isChildRelation:!i,isParentToChildReference:0==t.fields[h].referenceTo.length?"":t.fields[h].relationshipName,isParentApplicable:0!=t.fields[h].referenceTo.length,isChecked:!1,isField:!0,parentName:l.dataItem.data,relationshipName:l.dataItem.relationshipName?l.dataItem.relationshipName+(0==t.fields[h].referenceTo.length?"":"."+t.fields[h].relationshipName):0==t.fields[h].referenceTo.length?"":t.fields[h].relationshipName,items:l.dataItem.isChild||0==t.fields[h].referenceTo.length?[]:this.checkLastRelationshipName(l.dataItem.relationshipName)||this.checkLastRelationshipName(t.fields[h].relationshipName)?this.itemLength>=16?[]:[{text:t.fields[h].referenceTo[0],relationshipName:l.dataItem.relationshipName?l.dataItem.relationshipName+(0==t.fields[h].referenceTo.length?"":"."+t.fields[h].relationshipName):0==t.fields[h].referenceTo.length?"":t.fields[h].relationshipName,data:t.fields[h].referenceTo[0],isParentApplicable:!0,items:[{text:"Relationship Name : "+t.fields[h].relationshipName},{text:"Name : "+t.fields[h].name}]}]:[]};u.push(_)}let p=null!=l.dataItem.relationshipName&&""!=l.dataItem.relationshipName||l.dataItem.isChild?{text:"fields",data:"fields",isParent:!1,isField:!0,type:"search fields",parentName:l.dataItem.data,relationshipName:l.dataItem.relationshipName,items:u}:{text:"fields",data:"fields",isInput:!1,isParent:!1,isField:!0,type:"search fields",icon:"../assets/search.png",parentName:l.dataItem.data,relationshipName:l.dataItem.relationshipName,items:u};l.dataItem.items.splice(-2,2),2==l.dataItem.items.length&&(l.dataItem.items.push(p),this.dataItemList.push(p),i&&r&&l.dataItem.items.push(a))}fetchSObjects(){this.service.getsobjects().toPromise().then(t=>t).then(t=>{let i={data:[]},l={data:[]};for(let a=0;a<t.sobjects.length;a++)if(t.sobjects[a].queryable){let o={text:this.isShowLabelForObject?t.sobjects[a].label:t.sobjects[a].name,data:t.sobjects[a].name,id:a+1,isParent:!0,items:[{text:"ID Prefix : "+t.sobjects[a].keyPrefix},{text:"Labels",items:[{text:"Singular : "+t.sobjects[a].label},{text:"Plural : "+t.sobjects[a].labelPlural}]}]};l.data.push({text:t.sobjects[a].label,label:t.sobjects[a].name,isChecked:!1}),i.data.push(o)}this.data=i.data,this.objectExportData=l.data,this.searchdata=i.data,this.searchFieldData=JSON.parse(JSON.stringify(i.data)),this.loading=!1,this.loadingObject=!1})}setIcons(t){let i=t.toLowerCase();return null!=this.iconList[i]&&null!=this.iconList[i]&&"../assets/"+this.iconList[i]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(M.e),e.Y36(L),e.Y36(k.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-schema-explorer"]],viewQuery:function(t,i){if(1&t&&(e.Gf(C.MwP,5),e.Gf(B,5,C.MwP)),2&t){let l;e.iGM(l=e.CRH())&&(i.gridComp=l.first),e.iGM(l=e.CRH())&&(i.childrengrid=l.first)}},decls:55,vars:26,consts:[[1,"tabbed-panel"],["schemabody",""],[1,"body",3,"ngClass"],[1,"d-flex","h-100"],[1,"col-4","overflow-auto","h-100"],[1,"d-flex","justify-content-between","p-1"],["querytreeheader",""],["placeholder","Search Objects... ",1,"form-control","form-control-sm",3,"ngModel","ngModelChange","keyup"],["category",""],[1,"d-flex"],["id","labelcheckbox",1,"form-check","form-control-sm","px-5"],["type","checkbox",1,"form-check-input",3,"checked","click"],["for","flexCheckIndeterminate",1,"form-check-label"],["id","sobjecttree",1,"h-100-80","overflow-auto"],[4,"ngTemplateOutlet"],[1,"col","overflow-auto","px-1"],[1,"btn-group","m-1"],["id","executebtn",1,"btn","btn-sm","btn-light",3,"disabled","click"],["class","btn btn-sm btn-outline-secondary",3,"click",4,"ngIf"],["class","btn btn-sm btn-danger","id","clearbtn",3,"click",4,"ngIf"],["class","btn pe-none btn-sm btn-warning","type","toggle",3,"disabled",4,"ngIf"],["class","btn","type","button","disabled","",4,"ngIf"],["childgridcontainer",""],[4,"ngIf"],[3,"height","context","select"],["id","navbar",1,"nav-container"],["footercontainer",""],["historytemplate",""],["querytree",""],["querybox",""],["virtualtable",""],["childrentable",""],["navbar",""],["tablefooter",""],["celleditormodal",""],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],["id","clearbtn",1,"btn","btn-sm","btn-danger",3,"click"],["type","toggle",1,"btn","pe-none","btn-sm","btn-warning",3,"disabled"],[1,"bi","bi-exclamation-triangle"],["type","button","disabled","",1,"btn"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["tablefootercontainer",""],["class","w-100 text-small p-1 my-1 btn btn-sm text-start",3,"click",4,"ngFor","ngForOf"],[1,"w-100","text-small","p-1","my-1","btn","btn-sm","text-start",3,"click"],[1,"bi","bi-clock"],["kendoTreeViewExpandable","","textField","text","kendoTreeViewHierarchyBinding","",1,"h-100-80",3,"ngStyle","nodes","children","hasChildren","isExpanded","expandBy","expandedKeys","expandedKeysChange","expand","collapse"],["kendoTreeViewNodeTemplate","","ngFor","",3,"ngForOf"],[1,"schemaLabel"],["type","checkbox",3,"value","checked","change",4,"ngIf"],["type","text",3,"keyup",4,"ngIf"],["type","checkbox",3,"value","checked","change"],["type","text",3,"keyup"],["category1",""],[1,"force-apply-theme",2,"height","20px",3,"src","alt","title","click"],["id","querybox",1,"text-white","querybox-c","hide-border","rounded","shadow","my-2","px-2","h-100-80",3,"ngModel","ngModelChange"],["id","sobjecttree",1,"kendogrid-row-height-130"],["class","rounded","sortable","true",3,"ngStyle","kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","height","filter","filterable","pageChange","cellClick",4,"ngIf"],["class","h-100",4,"ngIf"],["sortable","true",1,"rounded",3,"ngStyle","kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","height","filter","filterable","pageChange","cellClick"],["virtualgrid","kendoGrid"],["kendoGridToolbarTemplate",""],["title","Editor","width","220",1,"editor-column-style",3,"locked","hidden"],["kendoGridCellTemplate",""],[4,"ngFor","ngForOf"],[3,"fileName"],["role","toolbar","aria-label","Toolbar with button groups",1,"btn-toolbar"],[1,"btn-group","ms-2"],["id","editbtn",3,"click"],[1,"pe-none"],[1,"bi","bi-pencil-square"],[1,"btn-group"],["id","exportbtn","type","button","kendoGridExcelCommand","",1,"btn","btn-light","btn-sm"],[1,"bi","bi-file-earmark-excel"],["id","refreshbtn",1,"btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-arrow-repeat"],[1,"tooltip-cx"],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"bi","bi-sd-card"],[1,"btn","btn-sm","btn-light",3,"click"],[1,"bi","bi-backspace"],["class","btn-group p-1",4,"ngIf"],[1,"btn-group","p-1"],["id","fulledit",1,"btn","border-secondary","btn-light","btn-sm"],["id","quickedit",1,"btn","border-secondary","btn-light","btn-sm"],["id","keep",1,"btn","border-secondary","btn-primary","btn-sm"],[1,"bi","bi-check-square"],["id","cancel",1,"btn","border-secondary","btn-light","btn-sm"],[3,"field","hidden","title","width","filter","format","editor"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"h-100"],[1,"w-100","text-center","my-auto","scale-2"],[1,"kendogrid-row-height-130"],["class","rounded","sortable","true",3,"ngStyle","kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","height","filter","filterable","cellClick",4,"ngIf"],["sortable","true",1,"rounded",3,"ngStyle","kendoGridBinding","skip","pageSize","scrollable","virtualColumns","rowHeight","height","filter","filterable","cellClick"],["childrengrid","kendoGrid"],[3,"field","title","width",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between2","bg-clr2","p-1"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"bi","bi-arrow-left"],[1,"btn-sm","btn-outline-success","pe-none","btn","fw-bold"],[1,"btn-group","ms-1"],[3,"field","title","width"],[3,"ngClass","click",4,"ngIf"],[3,"ngClass","click"],["role","toolbar","aria-label","Toolbar with button groups",1,"rounded-bottom","btn-toolbar"],["class","btn-group disabled",4,"ngIf"],["class","btn btn-sm",4,"ngIf"],[1,"btn-group","disabled"],[1,"btn","btn-sm","btn-light",3,"disabled","click"],[1,"bi","bi-caret-left-fill"],[1,"bi","bi-caret-right-fill"],[1,"btn","btn-sm"],["class","on-top w-100 h-100 bg-fade fade","id","fademe",3,"ngStyle",4,"ngIf"],["id","fademe",1,"on-top","w-100","h-100","bg-fade","fade",3,"ngStyle"],["role","document","id","fademe",1,"container","mx-auto","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","bg-secondary","text-white","py-1"],["id","exampleModalLongTitle",1,"modal-title"],["id","fademe","data-dismiss","modal","aria-label","Close",1,"btn-close","btn-close-white",3,"click"],["class","modal-body model-body-xl","style","text-align: left",4,"ngIf"],[1,"btn-toolbar","justify-content-between","p-2","border-top"],[1,"modal-body","model-body-xl",2,"text-align","left"],[1,"container",3,"formGroup"],[1,"row","m-2"],[1,"col-md-4","my-2"],["editedformfield",""],["for","control.kay",1,"fw-bold"],["class","text-small px-1 text-secondary",4,"ngIf"],["type","text",1,"form-control",3,"formControl"],[1,"text-small","px-1","text-secondary"],[1,"btn-toolbar"],[3,"click"],[1,"bi","bi-eye"],[1,"bi","bi-arrow-clockwise"],["id","fademe",1,"btn","btn-sm","btn-primary","border-secondary",3,"click"],["id","fademe",1,"btn","btn-sm","btn-light","border-secondary",3,"click"]],template:function(t,i){if(1&t){const l=e.EpF();e.TgZ(0,"div",0,1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5,6),e.TgZ(7,"div"),e.TgZ(8,"input",7,8),e.NdJ("ngModelChange",function(s){return i.searchTerm=s})("keyup",function(){e.CHM(l);const s=e.MAs(9);return i.onkeyup(s.value)}),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"input",11),e.NdJ("click",function(s){return i.selectLabelsForObjects(s)}),e.qZA(),e.TgZ(13,"label",12),e._uU(14," Labels "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",13),e.TgZ(16,"div"),e.YNc(17,P,1,0,"ng-container",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.YNc(19,H,1,0,"ng-container",14),e.TgZ(20,"div",16),e.TgZ(21,"button",17),e.NdJ("click",function(){return i.querybuilder.ExecuteQuery()}),e._uU(22),e.qZA(),e.YNc(23,V,2,0,"button",18),e.YNc(24,$,2,0,"button",19),e.YNc(25,G,3,1,"button",20),e.qZA(),e.YNc(26,z,3,0,"button",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"div",2),e.YNc(28,K,1,0,"ng-container",14),e.TgZ(29,"div",null,22),e.YNc(31,W,1,0,"ng-container",14),e.qZA(),e.YNc(32,ee,3,1,"div",23),e.qZA(),e.TgZ(33,"div",2),e.TgZ(34,"app-history-grid",24),e.NdJ("select",function(s){return i.history.select(s,!0)}),e.qZA(),e.qZA(),e.TgZ(35,"div",25,26),e.YNc(37,te,1,0,"ng-container",14),e.qZA(),e.qZA(),e.YNc(38,ie,1,0,"ng-container",14),e.YNc(39,ne,1,1,"ng-template",null,27,e.W1O),e.YNc(41,he,2,9,"ng-template",null,28,e.W1O),e.YNc(43,ue,1,1,"ng-template",null,29,e.W1O),e.YNc(45,Ze,3,2,"ng-template",null,30,e.W1O),e.YNc(47,je,2,1,"ng-template",null,31,e.W1O),e.YNc(49,Me,1,1,"ng-template",null,32,e.W1O),e.YNc(51,Pe,5,3,"ng-template",null,33,e.W1O),e.YNc(53,We,1,1,"ng-template",null,34,e.W1O)}if(2&t){const l=e.MAs(1),r=e.MAs(42),s=e.MAs(44),a=e.MAs(46),o=e.MAs(48),u=e.MAs(50),h=e.MAs(54);e.xp6(2),e.Q6J("ngClass",e.VKq(20,O,"querybuilder"!=i.nav.active)),e.xp6(6),e.Q6J("ngModel",i.searchTerm),e.xp6(4),e.Q6J("checked",i.isShowLabelForObject),e.xp6(5),e.Q6J("ngTemplateOutlet",r),e.xp6(2),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("disabled",!i.query),e.xp6(1),e.hij(" ",(!i.query||(i.lastquery.trim(),i.query.trim()),"")," Execute Query "),e.xp6(1),e.Q6J("ngIf",i.nav.state.resultgrid),e.xp6(1),e.Q6J("ngIf",i.showClearButton),e.xp6(1),e.Q6J("ngIf",(null==i.gridData?null:i.gridData.length)>0&&i.query&&i.lastquery.trim()!=i.query.trim()),e.xp6(1),e.Q6J("ngIf",i.querytable.loading),e.xp6(1),e.Q6J("ngClass",e.VKq(22,O,"resultgrid"!=i.nav.active)),e.xp6(1),e.Q6J("ngTemplateOutlet",a),e.xp6(3),e.Q6J("ngTemplateOutlet",o),e.xp6(1),e.Q6J("ngIf",!i.querytable.loading),e.xp6(1),e.Q6J("ngClass",e.VKq(24,O,"history"!=i.nav.active)),e.xp6(1),e.Q6J("height",l.offsetHeight-31)("context","soql"),e.xp6(3),e.Q6J("ngTemplateOutlet",u),e.xp6(1),e.Q6J("ngTemplateOutlet",h)}},directives:[w.mk,k.Fj,k.JJ,k.On,w.tP,w.O5,Y.n,w.sg,Z.kD,Z.fe,Z.i9,w.PC,Z.tF,C.MwP,C.HWw,C.kyx,C.u8U,C.UNL,C.Ztq,C.bg4,C.mYD,k._Y,k.JL,k.sg,k.oH],pipes:[w.Ts,w.uU,w.Nd],styles:[".schema-container{max-height:calc(100vh - 101px - 2rem);height:calc(100vh - 101px - 2rem)}.querybox-c{resize:none!important;font-family:Fira Code,monospace;line-height:1.7rem;font-size:large;background-color:#545a5f;width:100%;cursor:text}kendo-treeview>ul>li>ul li.k-display-none{display:block!important}\n"],encapsulation:2}),n})()}];let et=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[A.Bz.forChild(Xe)],A.Bz]}),n})();var tt=y(3711),it=y(2627);let rt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[w.ez,et,k.u5,k.UX,Z.dZ,C.zE6,C.xGR,tt.u7,it.m]]}),n})()}}]);